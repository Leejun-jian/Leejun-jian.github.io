<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-sql语法" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/sql%E8%AF%AD%E6%B3%95/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.905Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="sql语法-对大小写不敏感，大小写表达的意思相同"><a href="#sql语法-对大小写不敏感，大小写表达的意思相同" class="headerlink" title="sql语法:对大小写不敏感，大小写表达的意思相同"></a>sql语法:对大小写不敏感，大小写表达的意思相同</h2><h1 id="一些很重要的SQL命令"><a href="#一些很重要的SQL命令" class="headerlink" title="一些很重要的SQL命令"></a>一些很重要的SQL命令</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT - 从数据库中提取数据</span><br><span class="line">UPDATE - 更新数据库中的数据</span><br><span class="line">DELETE - 从数据库中删除数据</span><br><span class="line">INSERT INTO - 向数据库中插入新数据</span><br><span class="line">CREATE DATABASE - 创建新数据库</span><br><span class="line">ALTER DATABASE - 修改数据库</span><br><span class="line">CREATE TABLE - 创建新表</span><br><span class="line">ALTER TABLE - 变更（改变）数据库表</span><br><span class="line">DROP TABLE - 删除表</span><br><span class="line">CREATE INDEX - 创建索引（搜索键）</span><br><span class="line">DROP INDEX - 删除索引</span><br></pre></td></tr></table></figure>



<h3 id="distinct语法"><a href="#distinct语法" class="headerlink" title="distinct语法"></a>distinct语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT column_name，column_name FROM table；</span><br></pre></td></tr></table></figure>

<p>在一个表中，一个列可能会包含多个重复值，当需要仅仅列出不同值的时候，distinct关键字用于返回唯一不同的值。</p>
<h3 id="排序order-by"><a href="#排序order-by" class="headerlink" title="排序order  by :"></a>排序order  by :</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name,column_name</span><br><span class="line">FROM table_name</span><br><span class="line">ORDER BY column_name,column_name ASC|DESC;</span><br></pre></td></tr></table></figure>

<h4 id="插入insert-into"><a href="#插入insert-into" class="headerlink" title="插入insert into:"></a>插入insert into:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into table_name(field1,field2,...,fieldn) value(num1,num2,...,numn);</span><br><span class="line">#如果不声明列属性 ，那么每个插入操作就需要包含所有的列</span><br></pre></td></tr></table></figure>

<h4 id="更新数据：update"><a href="#更新数据：update" class="headerlink" title="更新数据：update"></a>更新数据：update</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update table_name set columns=value,... where some_columns=some_value;</span><br><span class="line">#如果不给其限制条件where，那就会改变整张表的相关数据</span><br></pre></td></tr></table></figure>

<h4 id="删除数据：delete"><a href="#删除数据：delete" class="headerlink" title="删除数据：delete"></a>删除数据：delete</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from table_name where some_columns=some_values;</span><br><span class="line">#如果不加限制条件，就会删除整个表</span><br></pre></td></tr></table></figure>

<h3 id="select-top（支持SQL-server-access），limit-支持mysql-，rownum-Oracle数据库的语法"><a href="#select-top（支持SQL-server-access），limit-支持mysql-，rownum-Oracle数据库的语法" class="headerlink" title="select top（支持SQL server&#x2F;access），limit(支持mysql)，rownum(Oracle数据库的语法)"></a>select top（支持SQL server&#x2F;access），limit(支持mysql)，rownum(Oracle数据库的语法)</h3><h5 id="·-top子句用来返回记录的数目，对于拥有大量数据的大型表，非常有用"><a href="#·-top子句用来返回记录的数目，对于拥有大量数据的大型表，非常有用" class="headerlink" title="· top子句用来返回记录的数目，对于拥有大量数据的大型表，非常有用"></a>· top子句用来返回记录的数目，对于拥有大量数据的大型表，非常有用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select top number|percent column_name(s) from table_name;</span><br><span class="line">select columns_name(s) from table_name limit number;</span><br><span class="line">#实例：输出person表中的前五行数据</span><br><span class="line">SELECT * FROM Persons LIMIT 5;</span><br></pre></td></tr></table></figure>

<p>变相返回后N行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--前5行</span><br><span class="line">select top 5 * from table</span><br><span class="line"></span><br><span class="line">--后5行</span><br><span class="line">select top 5 * from table order by id desc  --desc 表示降序排列 asc 表示升序</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/sql%E8%AF%AD%E6%B3%95/" data-id="cllwc4xho000ijsmo0nwubnje" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-shell编程（脚本编程）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/shell%E7%BC%96%E7%A8%8B%EF%BC%88%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.893Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="shell编程（脚本编程）"><a href="#shell编程（脚本编程）" class="headerlink" title="shell编程（脚本编程）"></a>shell编程（脚本编程）</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/bash</span><br><span class="line">echo <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">exit</span> <span class="number">0</span>    </span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220303230805224.png" alt="image-20220303230805224"></p>
<p>为脚本文件更改权限之后，加上执行权限，就可以当做可执行文件来执行，但是区别于.exe文件</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220303231047977.png" alt="image-20220303231047977"></p>
<p>C&#x2F;C++  编译型：xxx.c 编译生成二进制可执行程序，直接运行可执行程序（运行效率高，开发效率低）</p>
<p>shell     解释型：需要解释器，通过解释器解释执行（开发效率高，运行效率低）</p>
<h6 id="当对性能不作要求的时候，我们使用解释型语言会更加高效"><a href="#当对性能不作要求的时候，我们使用解释型语言会更加高效" class="headerlink" title="当对性能不作要求的时候，我们使用解释型语言会更加高效"></a>当对性能不作要求的时候，我们使用解释型语言会更加高效</h6><h6 id="写的是一个脚本文件，但是运行的是一个解释器，通过解释器来解释脚本文件；脚本文件是文本文件，可执行程序是脚本解释器，将脚本程序当做参数，传给脚本解释器来进行运行-如果需要知道脚本文件执行时的进程号，实际上就是脚本解释器的进程号。"><a href="#写的是一个脚本文件，但是运行的是一个解释器，通过解释器来解释脚本文件；脚本文件是文本文件，可执行程序是脚本解释器，将脚本程序当做参数，传给脚本解释器来进行运行-如果需要知道脚本文件执行时的进程号，实际上就是脚本解释器的进程号。" class="headerlink" title="写的是一个脚本文件，但是运行的是一个解释器，通过解释器来解释脚本文件；脚本文件是文本文件，可执行程序是脚本解释器，将脚本程序当做参数，传给脚本解释器来进行运行.如果需要知道脚本文件执行时的进程号，实际上就是脚本解释器的进程号。"></a>写的是一个脚本文件，但是运行的是一个解释器，通过解释器来解释脚本文件；脚本文件是文本文件，可执行程序是脚本解释器，将脚本程序当做参数，传给脚本解释器来进行运行.如果需要知道脚本文件执行时的进程号，实际上就是脚本解释器的进程号。</h6><h2 id="脚本编程的相关知识点"><a href="#脚本编程的相关知识点" class="headerlink" title="脚本编程的相关知识点"></a>脚本编程的相关知识点</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="本地变量"><a href="#本地变量" class="headerlink" title="本地变量"></a>本地变量</h4><p>在传统的C&#x2F;C++等编译型语言当中，我们的变量和值的关系是每一个值和变量（地址空间结合），每一个变量都有一个固定的地址，但是在解释型语言中，当变量被赋予不同的值的时候，他的地址也会随之改变，不可将两种不同类型的语言相提并论（<strong>内存分布方面</strong>）；解释型语言没有类型的区别</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=hello</span><br><span class="line">val=99</span><br><span class="line">mystr=$val#用val给mystr赋值</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">井号为注释标准</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">echo</span>是输出，相当于<span class="built_in">printf</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在赋值的时候加不加双引号是都可以的，且等号的两边不能有空格</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如果要原样输出，请使用单引号</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在键盘获取</span></span><br><span class="line"></span><br><span class="line">echo ”input“</span><br><span class="line">read line</span><br><span class="line">echo &quot;line=$line&quot;</span><br><span class="line"></span><br><span class="line">echo &#x27;val=$val&#x27;</span><br><span class="line">echo “val=$val”</span><br><span class="line">echo “str=$str”</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220303231626311.png" alt="image-20220303231626311"></p>
<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>在当前环境中已经定义好的可以直接使用，例如 PATH</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;$PATH&quot;#最常见环境变量，可执行程序存放的地点</span><br><span class="line">echo &quot;$PS1&quot;#命令提示符</span><br><span class="line">echo “\$0=$0”#脚本的名字</span><br><span class="line">echo &quot;\$#=$#&quot;#传递给脚本的参数个数</span><br><span class="line">echo &quot;\$$=$$&quot;#shell脚本的进程号，脚本程序通常会用他来生成一个唯一的临时文件，如/tmp/tmpfile</span><br><span class="line">echo &quot;\$1=$1&quot;#第一个参数</span><br><span class="line">echo “\$2=$2”#第二个参数，$后面跟的几就是第几个参数</span><br></pre></td></tr></table></figure>



<h4 id="参数变量"><a href="#参数变量" class="headerlink" title="参数变量"></a>参数变量</h4><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;input&quot;</span><br><span class="line">read line</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">判断字符串相等 等号两边有空格</span></span><br><span class="line">if [ &quot;$line&quot; = &quot;123&quot; ]</span><br><span class="line">then</span><br><span class="line">	echo &quot;==&quot;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">判断是否为空</span></span><br><span class="line"></span><br><span class="line">if [ -n &quot;$line&quot; ]</span><br><span class="line">then </span><br><span class="line">	echo &quot;值 $line&quot;</span><br><span class="line">else </span><br><span class="line">	echo &quot;null&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h4 id="算数比较"><a href="#算数比较" class="headerlink" title="算数比较"></a>算数比较</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/bash</span></span><br><span class="line">echo &quot;input&quot;</span><br><span class="line">read line</span><br><span class="line"></span><br><span class="line">if [ &quot;$line&quot; -lt 100 ]</span><br><span class="line">then</span><br><span class="line">	echo &quot;$line &lt; 100&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ &quot;$line&quot; -lt 0] || [&quot;$line&quot; -gt 100 ] </span><br><span class="line">then</span><br><span class="line">	echo &quot;成绩不合法&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h4 id="文件测试"><a href="#文件测试" class="headerlink" title="文件测试"></a>文件测试</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#文件检查命令test -f &lt;filename&gt;,检查文件是否存在</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -f fred.c<span class="comment">#开始</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">fi</span><span class="comment">#结束</span></span><br></pre></td></tr></table></figure>

<p>或者写成：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f fred.c ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /usr/bin/bash</span></span><br><span class="line"><span class="comment">#检测文件是否存在</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;input&quot;</span></span><br><span class="line"><span class="built_in">read</span> filename</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$filename</span>&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$filename</span> 存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$filename</span> 不存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#if test -f $filename</span></span><br><span class="line"><span class="comment">#then</span></span><br><span class="line">	<span class="built_in">echo</span> a.py存在</span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看文件类型</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$filename</span>&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$fielname</span> 是一个文件夹&quot;</span></span><br><span class="line"><span class="keyword">else</span> [ -f <span class="variable">$filename</span> ]</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$filename</span> 是普通文件&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$fielname</span> 不存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/bash</span><br><span class="line">i=1</span><br><span class="line">let &quot;i+=1&quot;</span><br><span class="line">echo &quot;i=$i&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="循环-for-while-until"><a href="#循环-for-while-until" class="headerlink" title="循环 for while until"></a>循环 for while until</h3><h4 id="for-循环的次数由值的个数决定"><a href="#for-循环的次数由值的个数决定" class="headerlink" title="for:循环的次数由值的个数决定"></a>for:循环的次数由值的个数决定</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">！/usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in 1,2,3</span><br><span class="line">do </span><br><span class="line">echo &quot;i=$i&quot;</span><br><span class="line">sleep 1</span><br><span class="line"></span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308132127559.png" alt="image-20220308132127559"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">！/usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">for name in &amp;(ls)</span><br><span class="line">do</span><br><span class="line">echo &quot;$name&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308132647099.png" alt="image-20220308132647099"></p>
<h4 id="while：满足判断条件就执行循环"><a href="#while：满足判断条件就执行循环" class="headerlink" title="while：满足判断条件就执行循环"></a>while：满足判断条件就执行循环</h4><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308133247193.png" alt="image-20220308133247193"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308133529549.png" alt="image-20220308133529549"></p>
<h4 id="Until-不满足条件就执行循环"><a href="#Until-不满足条件就执行循环" class="headerlink" title="Until:不满足条件就执行循环"></a>Until:不满足条件就执行循环</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/bash</span><br><span class="line"></span><br><span class="line">until [ -f file.txt ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    echo <span class="string">&quot;not find file&quot;</span></span><br><span class="line">    sleep</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>以上代码没有找到file.txt就执行循环体内的代码</p>
<h3 id="在脚本语言中，我们可以直接执行命令，让命令单独存放一行，他就会被当做一个命令被执行了"><a href="#在脚本语言中，我们可以直接执行命令，让命令单独存放一行，他就会被当做一个命令被执行了" class="headerlink" title="在脚本语言中，我们可以直接执行命令，让命令单独存放一行，他就会被当做一个命令被执行了"></a>在脚本语言中，我们可以直接执行命令，让命令单独存放一行，他就会被当做一个命令被执行了</h3><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220306231500210.png" alt="image-20220306231500210"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220306231535908.png" alt="image-20220306231535908"></p>
<h3 id="我们如何将命令执行的结果当做值赋给我们的变量"><a href="#我们如何将命令执行的结果当做值赋给我们的变量" class="headerlink" title="我们如何将命令执行的结果当做值赋给我们的变量"></a>我们如何将命令执行的结果当做值赋给我们的变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=$(ls)</span><br><span class="line">echo &quot;$str&quot;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220306232012721.png" alt="image-20220306232012721"></p>
<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308161845665.png" alt="image-20220308161845665"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220308162458916.png" alt="image-20220308162458916"></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>shell编程中函数没有返回值类型，我们可以认为他是所有类型都可以返回的，因为在shell中只要定义了变量不管是在函数中还是在脚本中，只要不做特殊声明，这个变量就会一直存在在脚本的运行周期中，所以有没有返回值没有太大的区别，因为我们可以直接调用局部变量。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /usr/bin/bash</span></span><br><span class="line"></span><br><span class="line">fun()</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;fun run&quot;</span><br><span class="line">	str=&quot;hello&quot;</span><br><span class="line">	echo &quot;str=$str&quot;</span><br><span class="line">	echo &quot;\$#=$#&quot;</span><br><span class="line">	echo &quot;\$1=$1&quot;</span><br><span class="line">	echo &quot;\$2=$2&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my_add()</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;\$#=$#&quot;</span><br><span class="line">	echo &quot;\$1=$1&quot;</span><br><span class="line">	echo &quot;\$2=$2&quot;</span><br><span class="line">	</span><br><span class="line">	res=`expr $1+$2`</span><br><span class="line">	return res</span><br><span class="line"><span class="meta prompt_">	#</span><span class="language-bash">	其实有没有<span class="built_in">return</span>都是一样的，因为res现在全局可用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my_add 1 3</span><br><span class="line">echo &quot;\$?=$?&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  $? 作用是取得上一行的运行结果，如果我们继续执行这一语句</span></span><br><span class="line">echo &quot;\$?=$?&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">此时就会输出0 因为<span class="built_in">echo</span>的运行结果被认为是始终成功的，而在shell中，成功被当作是0</span></span><br></pre></td></tr></table></figure>

<p>当我们在shell函数中定义过变量之后，要将不用的变量unset掉，以防止影响后面的脚本运行，或者通过声明local的方式将变量声明为函数内可用即可。</p>
<h3 id="脚本调用C语言，C语言调用脚本"><a href="#脚本调用C语言，C语言调用脚本" class="headerlink" title="脚本调用C语言，C语言调用脚本"></a>脚本调用C语言，C语言调用脚本</h3><p>脚本调用C语言很简单，本来脚本程序中运行的就是可执行命令，当我们把C语言编译之后就会生成一个可执行命令，直接在脚本程序中写入该可执行文件，加上可执行程序的路径，我们就可以完成在脚本程序中调用C语言了。</p>
<p>使用C语言调用脚本就相对来说麻烦一点了，我们要知道脚本语言是可以当做命令来运行的，那么想一下在我们的C语言程序中，如何在程序执行过程中调用命令呢？想必大家不难想到，通过进程替换呗 ，当我们要调用脚本程序的时候直接通过进程复制+进程替换的方式将一个子进程替换为我们要执行的脚本程序，这样就可以完成在C语言中调用脚本程序了。 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/shell%E7%BC%96%E7%A8%8B%EF%BC%88%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%EF%BC%89/" data-id="cllwc4xhn000hjsmo6dakhc3p" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Qt了解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/Qt%E4%BA%86%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.883Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h3><p><a href=""></a>mutable-&gt;return-type</p>
<p>{</p>
<p>​		statement;</p>
<p>}</p>
<p>[函数参数对象]（操作符重载函数参数）mutable-&gt;返回值{函数体}</p>
<ol>
<li><p>函数参数对象：</p>
<p>[]  ,标识一个lambda的开始，这部分必须存在，不能省略。函数对象参数是传递给编译器自动生成的函数对象类的构造函数的。函数对象参数只能使用那些到定义lambda为止时lambda所在作用范围内可见的局部变量（包括lambda所在类的this）。函数的对象参数有以下形式：</p>
<ul>
<li>空：没有使用任何函数参数对象参数</li>
<li>&#x3D; ：函数体内可以使用 Lambda 所在作用范围内所有可见的局部变量（包括 Lambda 所在类的 this），并且是<strong>值传递方式</strong>（相当于编译器自动为我们按值传递了所有局部变量）。</li>
<li>&amp;。函数体内可以使用 Lambda 所在作用范围内所有可见的局部变量（包括 Lambda 所在类的 this），并且是<strong>引用传递方式</strong>（相当于编译器自动为我们按引用传递了所有局部变量）。</li>
<li>this。函数体内可以使用 Lambda 所在类中的成员变量。</li>
<li>a。将 a 按值进行传递。按值进行传递时，函数体内不能修改传递进来的a 的拷贝，因为默认情况下函数是 const 的。<strong>要修改传递进来的 a 的拷贝</strong>，可以添加 mutable 修饰符。</li>
<li>&amp;a。将 a 按引用进行传递。</li>
<li>a, &amp;b。将 a 按值进行传递，b 按引用进行传递。</li>
<li>&#x3D;，&amp;a, &amp;b。除 a 和 b 按引用进行传递外，其他参数都按值进行传递。</li>
<li>&amp;, a, b。除 a 和 b 按值进行传递外，其他参数都按引用进行传递。</li>
</ul>
</li>
<li><p>操作符重载函数参数</p>
<p>没有参数时可以省略，参数可以通过<strong>按值</strong>或者按<strong>引用</strong>传递</p>
</li>
<li><p>可修改标识符</p>
<p>mutable<strong>声明</strong>，这部分可以省略。</p>
</li>
<li><p>函数返回值</p>
<p>-&gt;  返回值类型，标识函数返回值类型，当返回值为void，或者函数体中只有一处return的地方（此时编译器可以自动推断出返回值类型）时，这部分可以省略。</p>
</li>
<li><p>函数体</p>
<p>{}  是表示函数实现的地方，不能省略，但是可以为空。</p>
</li>
</ol>
<h2 id="封装格式和编码格式"><a href="#封装格式和编码格式" class="headerlink" title="封装格式和编码格式"></a>封装格式和编码格式</h2><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20221012234045921.png" alt="image-20221012234045921"></p>
<p>基于FFmpeg的开发？</p>
<p>一般音频的帧率一秒钟是25帧，音频帧和视频帧每秒钟的帧率是不同的e。</p>
<p>软解码：使用CPU解码，耗电量很大，但是速度很快</p>
<p>硬解码：固化电路解码，速度慢，解码性能固定好的，解码出来的格式转换比较麻烦。</p>
<h2 id="Qt开发的环境准备"><a href="#Qt开发的环境准备" class="headerlink" title="Qt开发的环境准备"></a>Qt开发的环境准备</h2><ul>
<li><p>Qt提供的官网<a target="_blank" rel="noopener" href="http://www.qt.cn注册下载/">http://www.qt.cn注册下载</a></p>
</li>
<li><p>通过网址*<u>download.qt.io</u>*直接下载</p>
</li>
<li><p>通过<a target="_blank" rel="noopener" href="http://www.ffmpeg.club.com下载(境外网站不好访问的时候使用)/">http://www.ffmpeg.club.com下载（境外网站不好访问的时候使用）</a></p>
</li>
</ul>
<p>尽量使用5.9版本</p>
<p>Qt creator以工程项目的方式对源代码进行管理，一个Qt工程当中包含不同类型的文件，具体如下：</p>
<p>a: .pro 项目描述文件</p>
<p>b: .h 头文件</p>
<p>c: .cpp 源程序文件</p>
<p>d: .ui界面描述文件</p>
<p>e: .pro .user用户描述文件</p>
<p>f: 资源文件（音频，图片等）</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230320162417180.png" alt="image-20230320162417180"></p>
<h4 id="信号和槽机制"><a href="#信号和槽机制" class="headerlink" title="信号和槽机制"></a>信号和槽机制</h4><ol>
<li><p>信号 ：所谓信号槽（观察者模式），信号的本质是时间。信号的展现方式就是函数。当某个事件发生之后，则发出一个信号（signal）。</p>
</li>
<li><p>槽（slot）：就是对信号响应的函数，槽就是一个函数，槽函数与普通函数的区别在于，槽函数可以与一个信号挂你，当信号被发生时，关联的柄函数被自动执行处理。信号与槽管理是使用QObject：：connect（）函数进行实现。</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230320165620699.png" alt="image-20230320165620699"></p>
</li>
</ol>
<p>信号函数只需要声明（不需要定义（实现）），而且槽函数需要定义（实现）。</p>
<ol start="3">
<li>信号与槽机制的连接方式<ul>
<li>一个信号可以跟另一个信号相连</li>
<li>同一个信号可以跟多个槽相连</li>
<li>同一个草可以响应多个信号</li>
</ul>
</li>
<li>信号与槽机制的优点：类型安全；松散耦合。一个类若要支持信号和槽，则必须从Qobject或Q噢成交额传统的子类继承（Qt的信号和槽机制不支持对末班的使用）</li>
<li>信号和槽机制的效率：信号和擦机制增强对象间通信的灵活性。一般情况下，通过传递一个信号来调用槽函数将会比直接调用非虚函数运行速度慢10 倍，原因：<ul>
<li>多线程的时候，信号可能需要排队等待；</li>
<li>编组&#x2F;解组传递的参数</li>
<li>安全的遍历所有的关联</li>
<li>需要定位接收信号的对象。</li>
</ul>
</li>
</ol>
<h5 id="信号与槽机制练习，计算圆的面积："><a href="#信号与槽机制练习，计算圆的面积：" class="headerlink" title="信号与槽机制练习，计算圆的面积："></a>信号与槽机制练习，计算圆的面积：</h5><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230320181303506.png" alt="image-20230320181303506"></p>
<p>源代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dialog.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;dialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QGridLayout&gt;</span></span></span><br><span class="line"><span class="type">const</span> <span class="type">static</span> <span class="type">double</span> PI = <span class="number">3.1415</span>;</span><br><span class="line"></span><br><span class="line">Dialog::Dialog(QWidget *parent)</span><br><span class="line">    : QDialog(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//创建一个标签：</span></span><br><span class="line"><span class="comment">//    labrl1 = new QLabel(&quot;请输入圆的半径：&quot;,this);</span></span><br><span class="line">    labrl1 = new QLabel(this);</span><br><span class="line">    labrl1-&gt;setText(tr(<span class="string">&quot;请输入圆的半径：&quot;</span>));</span><br><span class="line"></span><br><span class="line">    lineEdit = new QLineEdit(this);<span class="comment">//创建一个编辑框</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建第二个标签：显示圆的面积</span></span><br><span class="line">    label2 = new QLabel(this);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建命令按钮</span></span><br><span class="line">    qpbt =  new QPushButton(this);</span><br><span class="line">    qpbt-&gt;setText(<span class="string">&quot;显示圆的面积&quot;</span>);</span><br><span class="line"></span><br><span class="line">    QGridLayout * mlay = new QGridLayout(this);</span><br><span class="line">    mlay-&gt;addWidget(labrl1,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    mlay-&gt;addWidget(label2,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    mlay-&gt;addWidget(lineEdit,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    mlay-&gt;addWidget(qpbt,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//    QObject::connect(lineEdit,SIGNAL(textChanged(QString)),this,SLOT(CrclCircleArea()));</span></span><br><span class="line">    QObject::connect(qpbt,SIGNAL(clicked(<span class="type">bool</span>)),this,SLOT(CrclCircleArea()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dialog::~Dialog()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Dialog::CrclCircleArea</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">bool</span> isloop ;</span><br><span class="line">    QString tempstr;</span><br><span class="line">    QString valuestr = lineEdit-&gt;text();</span><br><span class="line">    <span class="type">int</span> valuelint = valuestr.toInt(&amp;isloop);</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> dArea = valuelint* valuelint*PI;</span><br><span class="line">    label2-&gt;setText(tempstr.setNum(dArea));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;dialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    QApplication <span class="title function_">a</span><span class="params">(argc, argv)</span>;</span><br><span class="line">    Dialog w;</span><br><span class="line">    w.show();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//dialog.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> DIALOG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DIALOG_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;QLineEdit&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> :</span> public QDialog</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    Dialog(QWidget *parent = <span class="number">0</span>);</span><br><span class="line">    ~Dialog();</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    QLabel * labrl1;<span class="comment">//表示圆的半径</span></span><br><span class="line">    QLabel* label2;<span class="comment">//表示圆的面积</span></span><br><span class="line">    QLineEdit* lineEdit;<span class="comment">//圆的半径的输入</span></span><br><span class="line">    QPushButton* qpbt;</span><br><span class="line">private slots:</span><br><span class="line">    <span class="type">void</span> <span class="title function_">CrclCircleArea</span><span class="params">()</span>;<span class="comment">//计算圆的面积</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// DIALOG_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="Qt中的QtAlgorithms"><a href="#Qt中的QtAlgorithms" class="headerlink" title="Qt中的QtAlgorithms"></a>Qt中的QtAlgorithms</h3><p>QtAlgorithms是一个Qt算法库其中包含常用的函数。</p>
<h2 id="Qt技术技巧"><a href="#Qt技术技巧" class="headerlink" title="Qt技术技巧"></a>Qt技术技巧</h2><h4 id="QMessageBox（提示窗口）的五种使用使用方法："><a href="#QMessageBox（提示窗口）的五种使用使用方法：" class="headerlink" title="QMessageBox（提示窗口）的五种使用使用方法："></a>QMessageBox（提示窗口）的五种使用使用方法：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButtonInfomation_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="literal">NULL</span>,<span class="string">&quot;information&quot;</span>,<span class="string">&quot;点击按钮将会关闭窗口&quot;</span>,QMessageBox::Yes | QMessageBox::No|QMessageBox::Abort ,QMessageBox::Yes);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_Critical_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">critical</span>(<span class="literal">NULL</span>,<span class="string">&quot;critical&quot;</span>,<span class="string">&quot;点击按钮将会关闭窗口&quot;</span>,QMessageBox::Yes | QMessageBox::No ,QMessageBox::Yes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_Waring_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">warning</span>(<span class="literal">NULL</span>,<span class="string">&quot;waring&quot;</span>,<span class="string">&quot;执行此操作会伤害磁盘&quot;</span>,QMessageBox::Yes | QMessageBox::No ,QMessageBox::Yes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_Question_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">question</span>(<span class="literal">NULL</span>,<span class="string">&quot;Questionn&quot;</span>,<span class="string">&quot;您的学历是?&quot;</span>,QMessageBox::Yes | QMessageBox::No ,QMessageBox::Yes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_deafult_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">about</span>(<span class="literal">NULL</span>,<span class="string">&quot;deafult&quot;</span>,<span class="string">&quot;默认提示窗口&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>QMessageBox函数都包含五个参数：</p>
<p>第一个参数表示：执行此操作的父对象指针</p>
<p>第二个参数表示：提示信息对话框的标题</p>
<p>第三个参数表示：提示信息</p>
<p>第四个参数表示：可选信息</p>
<p>第五个参数表示：默认选项</p>
<p>除了默认对话框之外，其余的四个提示对话框都是五个参数。</p>
<h4 id="GUI的运行模式"><a href="#GUI的运行模式" class="headerlink" title="GUI的运行模式"></a>GUI的运行模式</h4><h5 id="1-GUI的应用程序的运行模式"><a href="#1-GUI的应用程序的运行模式" class="headerlink" title="1. GUI的应用程序的运行模式"></a>1. GUI的应用程序的运行模式</h5><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230320155605631.png" alt="image-20230320155605631"></p>
<h5 id="2-GUI应用程序消息处理模型"><a href="#2-GUI应用程序消息处理模型" class="headerlink" title="2. GUI应用程序消息处理模型"></a>2. GUI应用程序消息处理模型</h5><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230320155713159.png" alt="image-20230320155713159"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/Qt%E4%BA%86%E8%A7%A3/" data-id="cllwc4xgw0009jsmo3skvbagm" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-mysql练习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/mysql%E7%BB%83%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.874Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>安装mysql：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-servr</span><br></pre></td></tr></table></figure>

<p>初始化配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line">非强校验密码。</span><br><span class="line">设置密码为：1234</span><br></pre></td></tr></table></figure>

<p>数据库服务启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql status</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220803184055953.png" alt="image-20220803184055953"></p>
<p>查找所有的用户信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名 </span><br><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span>，列名<span class="number">2.</span>.. <span class="keyword">from</span> 表名</span><br></pre></td></tr></table></figure>



<p>查找信息并去重(去重关键字 distinct)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> 想要的列名 <span class="keyword">from</span> 表名</span><br></pre></td></tr></table></figure>



<p>查询结果并限制返回行数（limit关键字）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">select</span> device_id <span class="keyword">from</span> user_profile limit <span class="number">0</span>,<span class="number">2</span><span class="comment">---运行效率更高]()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> device_id <span class="keyword">from</span> user_profile limit <span class="number">2</span>   <span class="comment">---运行效率低</span></span><br></pre></td></tr></table></figure>

<p><a href="%E5%8F%AA%E8%83%BD%E6%94%BE%E5%9C%A8%E8%AF%AD%E5%8F%A5%E7%BB%93%E5%B0%BE">注意limit的位置</a></p>
<p>将查询后的列重新命名(这里用到了起别名关键字 as)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> device_id <span class="keyword">as</span> user_infors_example <span class="keyword">from</span> user_profile limit <span class="number">0</span>,<span class="number">2</span> </span><br></pre></td></tr></table></figure>

<p><a href="">以上语句可以进行省略：select device_id user_infos_example from user_profile limit 2</a></p>
<p>查找特殊的用户（查找学校是北京大学的学生信息）（where关键字限制查询条件）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> device_id,universty <span class="keyword">from</span> user_profile <span class="keyword">where</span> universty<span class="operator">=</span><span class="string">&#x27;北京大学&#x27;</span></span><br></pre></td></tr></table></figure>







<p>查找年龄大于24的学生(加上限制条件就可以查询到相应的数据)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_profile <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">24</span></span><br></pre></td></tr></table></figure>







<p>确定范围，查找某个年龄段之内的信息</p>
<p><u>使用between…and 和 not between…and</u></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> device_id,gender,age <span class="keyword">from</span> user_profile <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">23</span></span><br><span class="line">等价于：</span><br><span class="line"><span class="keyword">select</span> device_id,gender,age <span class="keyword">from</span> user_profile <span class="keyword">where</span> age<span class="operator">&gt;=</span><span class="number">20</span> <span class="keyword">and</span> age<span class="operator">&lt;</span><span class="number">23</span></span><br></pre></td></tr></table></figure>







<p>如果我们不需要某一项信息，我们就使用where  !&#x3D; ‘ ‘去掉某条记录就好了</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> user_profile <span class="keyword">where</span> <span class="operator">!=</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/mysql%E7%BB%83%E4%B9%A0/" data-id="cllwc4xhl000gjsmoep5e4d6h" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Linux知识点总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/Linux%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.866Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="常用的命令"><a href="#常用的命令" class="headerlink" title="常用的命令"></a>常用的命令</h4><h5 id="文件操作命令："><a href="#文件操作命令：" class="headerlink" title="文件操作命令："></a>文件操作命令：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls  //查看文件命令</span><br><span class="line">常用参数： ls -a</span><br><span class="line">		  ls -l</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mkdir  //创建目录文件</span><br><span class="line">touch  //创建普通文件</span><br><span class="line">rmdir  //删除文件</span><br><span class="line">rm   //删除文件  以上两个删除文件的命令再删除目录文件的时候都加  -r</span><br><span class="line">mv  //移动文件</span><br><span class="line">cp  //拷贝文件</span><br><span class="line">cat  //查看文件，拼接文件，向文件内输入信息</span><br><span class="line">cd   //更换文件路径，路径名可以是相对路径也可以是绝对路径</span><br><span class="line">pwd  //显示当前路径</span><br><span class="line">|    //管道，以上一个命令的结果当做下一个命令的输入</span><br><span class="line">grep   //过滤命令，查找指定字符对应的行</span><br><span class="line">find   //查找命令</span><br><span class="line">tar    //文件打包命令    </span><br><span class="line">	打包： tar -cvf 包名 文件名</span><br><span class="line">	解包： tar -xvf 包名 文件名</span><br><span class="line">gzip    //文件压缩与解压命令</span><br><span class="line">	压缩：gzip 文件名</span><br><span class="line">	解压：gzip -d 压缩包名</span><br><span class="line">wc   //字符统计命令  -w词数   -c字符数  -l 行数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="进程和系统命令："><a href="#进程和系统命令：" class="headerlink" title="进程和系统命令："></a>进程和系统命令：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ps   //查看当前运行进程</span><br><span class="line">pstree   //以树状图形式显示当前进程关系</span><br><span class="line">kill    //杀死命令    kill -6  强行杀死某个进程</span><br><span class="line">pkil    //杀死一组进程</span><br><span class="line">&amp;   //后台运行命令</span><br><span class="line">jobs   //查看当前终端运行的任务</span><br><span class="line">top   //查看系统资源使用情况和进程信息</span><br><span class="line">useradd  newname    //添加新用户</span><br><span class="line">userdel  name    //删除用户，默认删除用户但是不删除用户家目录，想要删除用户家目录userdel -r name </span><br></pre></td></tr></table></figure>

<h5 id="调试代码"><a href="#调试代码" class="headerlink" title="调试代码"></a>调试代码</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">objdump  -s -d project.o:</span><br><span class="line">		-d 将所有的指令进行反汇编</span><br><span class="line">        -s 以<span class="number">16</span>进制打印段的内容</span><br><span class="line">readlf</span><br><span class="line">nm</span><br></pre></td></tr></table></figure>

<p>readlf和nm两个命令可是用来查看链接文件的符号表</p>
<h5 id="文件编辑命令"><a href="#文件编辑命令" class="headerlink" title="文件编辑命令"></a>文件编辑命令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi   //查看并编辑文件</span><br></pre></td></tr></table></figure>





<h3 id="根目录下各文件夹存储的信息："><a href="#根目录下各文件夹存储的信息：" class="headerlink" title="根目录下各文件夹存储的信息："></a>根目录下各文件夹存储的信息：</h3><p>$$</p>
<p>$$</p>
<p>&#x2F;bin      存放常用的命令</p>
<p>&#x2F;etc      存放系统配置文件</p>
<table>
<thead>
<tr>
<th>&#x2F;etc&#x2F;passwd</th>
<th>存储用户基本信息</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;etc&#x2F;group</td>
<td>储存用户组信息</td>
</tr>
<tr>
<td>&#x2F;etc&#x2F;shadow</td>
<td>存储用户的密码</td>
</tr>
</tbody></table>
<p>&#x2F;dev    存放设备文件</p>
<p>&#x2F;lib      存放库文件</p>
<p>&#x2F;tmp    存放各种临时文件</p>
<h3 id="LInux中程序的分步编译："><a href="#LInux中程序的分步编译：" class="headerlink" title="LInux中程序的分步编译："></a>LInux中程序的分步编译：</h3><p>预编译：gcc -E main.c -o main.i</p>
<p>编译： gcc -s main.i -o mian.s</p>
<p>汇编：gcc -c main.s -o main.o</p>
<p>链接： gcc  main.o -o main</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/Linux%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" data-id="cllwc4xgt0008jsmof32md42f" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Linux项目-lsc" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/Linux%E9%A1%B9%E7%9B%AE-lsc/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.617Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><ul>
<li><p>vscode、</p>
</li>
<li><p>cvm腾讯云服务器、</p>
</li>
<li><p>git、gcc&#x2F;gdb、</p>
</li>
<li><p>cloc(统计代码量)</p>
</li>
<li><p>docker </p>
</li>
<li><p>cmake</p>
</li>
<li><p>apt install git</p>
</li>
<li><p>apt install cloc</p>
</li>
</ul>
<p>下载相应的文件需要进入管理员模式，非管理员模式需要sudo apt install</p>
<p>apt update&#x2F;apt upgrade   先升级包管理器，然后再下载</p>
<p>apt get install</p>
<ul>
<li><p>git init 初始化git仓库</p>
</li>
<li><p>git add filename从工作区加到暂存器</p>
</li>
<li><p>git commit filename -m “描述信息” 从暂存区添加到本地版本库</p>
</li>
<li><p>git status 查看版本状态</p>
</li>
<li><p>git log 查看日志信息</p>
<p>关联本地仓库和远程仓库</p>
<p>git remote  add myremote git@”ssh地址”连接远程仓库</p>
<p>git remote -v 查看远程仓库信息</p>
<p><strong>交代码之前先拉代码</strong></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220727141832746.png" alt="image-20220727141832746"></p>
<p>git pull&#x2F;fetch myremote “分支名”(fetch拉的是变更的代码，pull拉的是远程分支所有的代码)</p>
<p>git branch -r&#x2F;-a 查看远程分支</p>
<p><strong>git配置</strong></p>
</li>
<li><p>git config –global user.name “名字”</p>
</li>
<li><p>git config –global user.email “邮箱”</p>
</li>
<li><p>git checkout -b ”master“  创建新的分支，分支名最好和远程仓库一样</p>
<p><strong>推拉之前需要先搞秘钥</strong>：</p>
</li>
<li><p><strong>ssh-keygen -t rsa -C “邮箱地址” 生成秘钥</strong></p>
</li>
<li><p>生成秘钥之后，在家目录中有一个 ~&#x2F;**.ssh&#x2F;ssh_rsa.pub **文件里面有我们生成的公钥和私钥</p>
</li>
<li><p>拷贝公钥—-》进入git到创建的项目里面添加公钥</p>
</li>
</ul>
<p>推代码：</p>
<p>建立远程连接：git remote add origin <a href="mailto:&#x67;&#x69;&#x74;&#x40;&#103;&#105;&#x74;&#x65;&#x65;&#46;&#99;&#111;&#x6d;">&#x67;&#x69;&#x74;&#x40;&#103;&#105;&#x74;&#x65;&#x65;&#46;&#99;&#111;&#x6d;</a>:shijiu2xin&#x2F;dsf.git<br>推代码： git push -u origin “master”</p>
<h3 id="数据库MySQL"><a href="#数据库MySQL" class="headerlink" title="数据库MySQL"></a>数据库MySQL</h3><p>安装命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-client-core-8.0</span><br><span class="line">sudo apt-get install libmysqlclient-dev -y</span><br></pre></td></tr></table></figure>

<p>数据库的相关命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mariadb  <span class="comment">#启动MariaDB</span></span><br><span class="line">systemctl stop mariadb  <span class="comment">#停止MariaDB</span></span><br><span class="line">systemctl restart mariadb  <span class="comment">#重启MariaDB</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb  <span class="comment">#设置开机启动</span></span><br></pre></td></tr></table></figure>

<p>mysql创建完成之后默认的用户密码为空，可以通过以下命令改变root用户密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root password &quot;new_password&quot;;</span><br></pre></td></tr></table></figure>



<h2 id="vscode链接云服务器"><a href="#vscode链接云服务器" class="headerlink" title="vscode链接云服务器"></a>vscode链接云服务器</h2><p>进入vscode打开拓展</p>
<ul>
<li><p>下载remote-ssh 插件</p>
</li>
<li><p>点击远程资源管理器，添加远程资源</p>
<p>查看端口 lsof -i :22</p>
<p> cd &#x2F;etc&#x2F;ssh&#x2F;config   查看相关文件</p>
<p>service ssh restart  启动ssh远程服务</p>
<p>systemctl restart ssh 启动ssh远程服务</p>
</li>
</ul>
<h3 id="cmake的使用"><a href="#cmake的使用" class="headerlink" title="cmake的使用"></a>cmake<strong>的使用</strong></h3><p>编译构建工具，用来编译构建大型的软件程序</p>
<ul>
<li><p>CMakeLists.txt(注意大小写)</p>
<p><strong>基本语法</strong>：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>.<span class="number">0</span>）</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(项目名称)</span><br><span class="line"><span class="comment">#设置环境变量</span></span><br><span class="line"><span class="keyword">set</span> (CMAKE_CXX&lt;FLAGS <span class="variable">$&#123;CMAKE_CXX&lt;FLAGS&#125;</span> -g)</span><br><span class="line"><span class="comment">#EXECUTABLE_OUTPUT_PATH生成的在可执行文件的存储路径</span></span><br><span class="line"><span class="comment">#EXECUTABLE_OUTPUT_PATH项目的根目录</span></span><br><span class="line"><span class="comment">#include_dirrctories添加头文件地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置可执行文件的输出路径</span></span><br><span class="line"><span class="keyword">set</span> (EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/bin)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">include_dirrctories(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加源文件目录</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(src)  </span><br><span class="line"></span><br><span class="line"><span class="comment">#将当前文件夹重新取名为 SRC_LIST</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. SRC_LIST) </span><br><span class="line"></span><br><span class="line"><span class="comment">#编译时添加参数</span></span><br><span class="line">add_definition(<span class="string">&quot;-g&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成一个可执行文件，使用的是当前文件夹下的所有文件</span></span><br><span class="line"><span class="keyword">add_executable</span>(logger <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="当找不到头文件的时候，有可能是我们的CMakeLists-txt文件中没有包含到头文件的文件夹，加上就好了"><a href="#当找不到头文件的时候，有可能是我们的CMakeLists-txt文件中没有包含到头文件的文件夹，加上就好了" class="headerlink" title="当找不到头文件的时候，有可能是我们的CMakeLists.txt文件中没有包含到头文件的文件夹，加上就好了"></a>当找不到头文件的时候，有可能是我们的CMakeLists.txt文件中没有包含到头文件的文件夹，加上就好了</h5><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114219485.png" alt="image-20220728114219485"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114229570.png" alt="image-20220728114229570"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114246518.png" alt="image-20220728114246518"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114304332.png" alt="image-20220728114304332"></p>
<h1 id="分布式系统框架-项目介绍"><a href="#分布式系统框架-项目介绍" class="headerlink" title="分布式系统框架&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;项目介绍"></a>分布式系统框架&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;项目介绍</h1><h2 id="distribute-system-framework"><a href="#distribute-system-framework" class="headerlink" title="(distribute-system-framework)"></a>(distribute-system-framework)</h2><p><strong>单体</strong>-》<strong>集群</strong>-》<strong>分布式</strong></p>
<p>一个基于Linux平台，使用C++编写的分布式系统框架。服务器端采用了线程池+Libevent的IO模型，并为其实现了简单的负载均衡。服务器端业务层使用了MVC的设计模式。数据存储方面对MySQL数据库C-API进行了C++的类封装。为了实现服务器集群的负载均衡，实现了以一致性hash为底层算法的负载均衡服务器，这可以作为一个单独的模块。</p>
<h5 id="项目文件目录："><a href="#项目文件目录：" class="headerlink" title="项目文件目录："></a>项目文件目录：</h5><ul>
<li><p>logger &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 日志类</p>
<ul>
<li><p>logger.h</p>
</li>
<li><p>message.h</p>
</li>
<li><p>timeStemp.h &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 时间戳是日志的组成部分，时间戳又有多个部分组成，所以将其独立出来。</p>
</li>
</ul>
</li>
<li><p>mainServer</p>
<ul>
<li>mainServer.h</li>
</ul>
</li>
<li><p>mysqldb</p>
<ul>
<li>mysqldb.h</li>
</ul>
</li>
<li><p>reactor</p>
<ul>
<li>reactor.h</li>
</ul>
</li>
<li><p>redis</p>
<ul>
<li>redis.h</li>
</ul>
</li>
<li><p>thread</p>
<ul>
<li>thread.h</li>
</ul>
</li>
<li><p>threadPool</p>
<ul>
<li>threadPool.h</li>
</ul>
</li>
<li><p>untils</p>
<ul>
<li><p>ipAddressPort.h</p>
</li>
<li><p>msg.h</p>
</li>
<li><p>tcpClient.h</p>
</li>
<li><p>tcpServer.h</p>
</li>
</ul>
</li>
<li><p>controller</p>
<ul>
<li>controller.h</li>
</ul>
</li>
<li><p>view</p>
<ul>
<li>view.h</li>
</ul>
</li>
<li><p>public.h</p>
</li>
<li><p>json.h</p>
</li>
</ul>
<h5 id="项目的逻辑图"><a href="#项目的逻辑图" class="headerlink" title="项目的逻辑图"></a>项目的逻辑图</h5><h1 id="项目当中的技术栈"><a href="#项目当中的技术栈" class="headerlink" title="项目当中的技术栈"></a>项目当中的技术栈</h1><ul>
<li><p>日志类编写中的拓展</p>
<ul>
<li><p>单例模式</p>
<ul>
<li><p>懒汉式</p>
</li>
<li><p>饿汉式</p>
</li>
<li><p>线程安全的单例模式</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>github gitee gitlab     三个代码仓库的区别：</p>
<h2 id="第一节、日志类的实现"><a href="#第一节、日志类的实现" class="headerlink" title="第一节、日志类的实现"></a>第一节、日志类的实现</h2><h3 id=""><a href="#" class="headerlink" title=""></a><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220727171110991.png" alt="image-20220727171110991"></h3><p>由上图我们可以看出，我们将日志封装成一个类，日志类包含了多个成员，其中日志<strong>时间戳</strong>又是包含了多个成员的类。所以我们需要将时间戳单独封装一次，再将其作为成员封装到日志类当中。</p>
<h3 id="（一）、时间戳的实现"><a href="#（一）、时间戳的实现" class="headerlink" title="（一）、时间戳的实现"></a>（一）、时间戳的实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TimeStamp</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">TimeStamp</span>();</span><br><span class="line">    <span class="built_in">TimeStamp</span>(<span class="type">__uint64_t</span>);</span><br><span class="line">    <span class="function">std::string <span class="title">ToString</span><span class="params">()</span><span class="type">const</span></span>;</span><br><span class="line">    <span class="function"><span class="type">static</span> TimeStamp <span class="title">Now</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> : </span><br><span class="line">    <span class="type">time_t</span> m_microSecondSinceEpoch;</span><br><span class="line">&#125;;</span><br><span class="line">TimeStamp::<span class="built_in">TimeStamp</span>():<span class="built_in">m_microSecondSinceEpoch</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line">TimeStamp::<span class="built_in">TimeStamp</span>(<span class="type">__uint64_t</span> microSecondSinceEpoch):<span class="built_in">m_microSecondSinceEpoch</span>(microSecondSinceEpoch)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">TimeStamp::ToString</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span> t;</span><br><span class="line">    <span class="built_in">localtime_r</span>(&amp;m_microSecondSinceEpoch,&amp;t);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> buf[SMALL_BUF_LEN]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">snprintf</span>(buf, SMALL_BUF_LEN, <span class="string">&quot;[%04d/%02d/%02d %02d:%02d:%02d]&quot;</span>,</span><br><span class="line">     t.tm_year + <span class="number">1900</span>, t.tm_mon + <span class="number">1</span>, t.tm_mday, </span><br><span class="line">     t.tm_hour, t.tm_min, t.tm_sec);</span><br><span class="line">    <span class="keyword">return</span> buf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">TimeStamp <span class="title">TimeStamp::Now</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">TimeStamp</span>(<span class="built_in">time</span>(<span class="literal">NULL</span>));<span class="comment">//返回当前时间戳</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114545229.png" alt="image-20220728114545229"></p>
<p>时间戳完成之后，进行提交到本地版本库；</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114649118.png" alt="image-20220728114649118"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114719567.png" alt="image-20220728114719567"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728114737764.png" alt="image-20220728114737764"></p>
<h2 id="（二）、文件名、函数名、行号的实现"><a href="#（二）、文件名、函数名、行号的实现" class="headerlink" title="（二）、文件名、函数名、行号的实现"></a>（二）、文件名、函数名、行号的实现</h2><p>这三个都有C语言的内置类型可以实现，</p>
<p><strong>LINE</strong>:行号</p>
<p>__FUNCTION__：函数名</p>
<p><strong>FILE</strong>:文件名</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;filename:%s,linNumber:%d,Function:%S&quot;</span>,__FILE__,__lINE__,__FUNCTION__);</span><br></pre></td></tr></table></figure>

<h2 id="（三）、日志类的实现"><a href="#（三）、日志类的实现" class="headerlink" title="（三）、日志类的实现"></a>（三）、日志类的实现</h2><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728191315255.png" alt="image-20220728191315255"></p>
<p>类图：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729134439464.png" alt="image-20220729134439464"></p>
<p>日志信息包含日志头和日志信息等内容，当我们要将日志信息打印到终端的时候需要给各个字段赋予颜色，然后打印出相应的格式，这里我们用到了stringstream类，通过流的方式对日志信息进行操作。</p>
<p>值得注意的是，由于C语言当中有内置的__FILE__,<strong>FUNCTION</strong>,__LINE__分别表示文件名，函数名和行号，所以我们列举或声明类型的时候要避免该类型的词的出现，以免出现重定义，导致程序编译出错。</p>
<p>代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __MESSAGE_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __MESSAGE_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;public.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string m_colorHeader; <span class="comment">//带颜色的日志头，打印到终端</span></span><br><span class="line">    std::string m_commonHeader; <span class="comment">//不带颜色的日志头，打印到文件</span></span><br><span class="line">    std::string m_msg;          <span class="comment">//日志信息</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化日志颜色</span></span><br><span class="line">    <span class="function">std::string <span class="title">formatFieldWithColor</span><span class="params">(COLOR_NUMBER , <span class="type">bool</span> ,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> std::string&amp; , <span class="type">const</span> std::string &amp;, <span class="type">bool</span> )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Message</span>(LOG_LEVEL , std::string , std::string , <span class="type">int</span> );</span><br><span class="line">    <span class="comment">// 格式化日志头</span></span><br><span class="line">    <span class="comment">// [时间戳][日志级别][文件名称][函数名称][行号]</span></span><br><span class="line">    <span class="function">std::string <span class="title">FormatHeader</span><span class="params">(LOG_LEVEL,std::string,std::string,<span class="type">int</span>,<span class="type">bool</span>)</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">ToString</span><span class="params">(<span class="type">bool</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    Message &amp;<span class="keyword">operator</span>&lt;&lt;(<span class="type">const</span> T &amp;t)</span><br><span class="line">    &#123;</span><br><span class="line">        std::stringstream ss;</span><br><span class="line">        ss &lt;&lt; t;</span><br><span class="line">        m_msg += ss.<span class="built_in">str</span>();</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>



<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;message.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;public.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;timeStamp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">colorNumber:色号</span></span><br><span class="line"><span class="comment">dark：是否是神色，0为浅色，1为深色</span></span><br><span class="line"><span class="comment">delimiter：分隔符</span></span><br><span class="line"><span class="comment">fieldName：字段名称</span></span><br><span class="line"><span class="comment">colored：是否上色，0不上，1上色</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">std::string <span class="title">Message::formatFieldWithColor</span><span class="params">(COLOR_NUMBER colorNumber, <span class="type">bool</span> dark,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">const</span> std::string &amp;delimiter, <span class="type">const</span> std::string &amp;fieldName, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">bool</span> colored)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//文件流对象</span></span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    <span class="keyword">if</span>(colored)</span><br><span class="line">    &#123;</span><br><span class="line">        ss&lt;&lt;<span class="string">&quot;\033[&quot;</span>&lt;&lt;dark&lt;&lt;<span class="string">&quot;;&quot;</span>&lt;&lt;colorNumber&lt;&lt;<span class="string">&quot;m &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ss &lt;&lt; fieldName;</span><br><span class="line">    <span class="keyword">if</span> (colored)</span><br><span class="line">    &#123;</span><br><span class="line">        ss&lt;&lt;<span class="string">&quot;\033[0m&quot;</span>;<span class="comment">//重置属性</span></span><br><span class="line">    &#125;</span><br><span class="line">    ss &lt;&lt; delimiter;</span><br><span class="line">    <span class="keyword">return</span> ss.<span class="built_in">str</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Message::<span class="built_in">Message</span>(LOG_LEVEL level,std::string fileName,</span><br><span class="line">std::string functionName,<span class="type">int</span> lineNumber)</span><br><span class="line">&#123;</span><br><span class="line">    m_colorHeader = <span class="built_in">FormatHeader</span>(level,fileName,functionName,lineNumber,<span class="literal">true</span>);</span><br><span class="line">    m_commonHeader = <span class="built_in">FormatHeader</span>(level, fileName, functionName, lineNumber,<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 格式化日志头</span></span><br><span class="line"><span class="comment">// [时间戳][日志级别][文件名称][函数名称][行号]</span></span><br><span class="line"><span class="function">std::string <span class="title">Message::FormatHeader</span><span class="params">(LOG_LEVEL level,std::string fileName,</span></span></span><br><span class="line"><span class="params"><span class="function">std::string functionName,<span class="type">int</span> lineNumber, <span class="type">bool</span> colored = <span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//时间戳</span></span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss&lt;&lt;formatFieldWithColor(DEFAUL_COLOR,<span class="number">0</span>,<span class="string">&quot;|&quot;</span>,TimeStamp::<span class="built_in">Now</span>().<span class="built_in">ToString</span>(),colored);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//日志级别</span></span><br><span class="line">    COLOR_NUMBER logLevelColor = LogLevelColor[level]; <span class="comment">//日志级别的颜色</span></span><br><span class="line">    std::string logType = LogFeildType[level];  <span class="comment">//日志级别的类型</span></span><br><span class="line">    ss &lt;&lt; formatFieldWithColor(logLevelColor, <span class="number">1</span>, <span class="string">&quot;|&quot;</span>, logType, colored);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//文件名称</span></span><br><span class="line">    COLOR_NUMBER fileNameColor = LogFeildColor[FILE_NAME];</span><br><span class="line">    ss &lt;&lt; formatFieldWithColor(fileNameColor, <span class="number">1</span>, <span class="string">&quot;|&quot;</span>, fileName, colored);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//函数名称</span></span><br><span class="line">    COLOR_NUMBER functionColor = LogFeildColor[FUNCTION_NAME];</span><br><span class="line">    ss &lt;&lt; formatFieldWithColor(functionColor, <span class="number">1</span>, <span class="string">&quot;|&quot;</span>, functionName, colored);</span><br><span class="line">    <span class="comment">//行号</span></span><br><span class="line">    COLOR_NUMBER lineColor = LogFeildColor[LINE];</span><br><span class="line">    ss &lt;&lt; formatFieldWithColor(lineColor, <span class="number">1</span>, <span class="string">&quot;|&quot;</span>, std::<span class="built_in">to_string</span>(lineNumber), colored);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ss.<span class="built_in">str</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::string <span class="title">Message::ToString</span><span class="params">(<span class="type">bool</span> colored = <span class="literal">true</span>)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> colored ? m_colorHeader + m_msg : m_commonHeader + m_msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Message <span class="title">msg</span><span class="params">(INFO, __FILE__, __FUNCTION__, __LINE__)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; msg.<span class="built_in">ToString</span>() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220728194756012.png" alt="image-20220728194756012"></p>
<h3 id="（三）、封装日志类"><a href="#（三）、封装日志类" class="headerlink" title="（三）、封装日志类"></a>（三）、封装日志类</h3><p>日志类的主要作用是将日志信息打印到终端或者日志文件当中，需要的成员变量分别是</p>
<ul>
<li><p>决定是否打印到终端或者日志文件的两个布尔值，</p>
</li>
<li><p>一个文件流对象决定到底打印到那个文件当中，</p>
</li>
<li><p>还有一个日志级别决定了日志的内容形式。</p>
</li>
</ul>
<p>日志类封装完成之后，将其与日志信息类进行拼接就可以打印出我们想要的日志信息，并且在日志文件当中还有备份。</p>
<p>类图：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729135125765.png"></p>
<p>FATAL级别的日志是一个特殊的情况，当我们遇到FATAL的时候，说明程序已经遇到了很严重的问题，需要终止程序，但是不能够随意加上额此贴（0）因为会影响其他级别的日志输出，所以要经过特殊的处理。</p>
<p>代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __LOGGER_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __LOGGER_H__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;message.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;public.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用单例模式</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">懒汉式</span></span><br><span class="line"><span class="comment">饿汉式</span></span><br><span class="line"><span class="comment">线程安全的单例模式</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1、把构造函数私有化</span></span><br><span class="line"><span class="comment">2、提供生成对象的静态方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">单例模式  迭代器模式 简单工厂 抽象工厂 工厂方法  观察者模式 装饰器模式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">Logger</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// if (NULL == getenv(&quot;LOG_LEVEL&quot;))</span></span><br><span class="line">        <span class="comment">// if (nullptr == getenv(&quot;LOG_LEVEL&quot;))</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">getenv</span>(<span class="string">&quot;LOG_LEVEL&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            m_level = INFO;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 断言 getenv(&quot;LOG_LEVEL&quot;)的返回值一定是 &quot;INFO&quot; &quot;ERROR&quot; &quot;DEBUG&quot; &quot;FATAL&quot;</span></span><br><span class="line">            m_level = LogFeildType[<span class="built_in">getenv</span>(<span class="string">&quot;LOG_LEVEL&quot;</span>)];</span><br><span class="line">        &#125;</span><br><span class="line">        m_logToLogFile = <span class="literal">true</span>;</span><br><span class="line">        m_logToTerminal = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">bool</span> m_logToTerminal;<span class="comment">//判断日志是否打印到终端</span></span><br><span class="line">    <span class="type">bool</span> m_logToLogFile; <span class="comment">//判断日志是否打印到日志文件当中</span></span><br><span class="line">    std::fstream m_logFile; <span class="comment">//日志文件</span></span><br><span class="line">    LOG_LEVEL m_level;  <span class="comment">//日志级别</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> Logger* <span class="title">Getinstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">static</span> Logger logger;</span><br><span class="line">        <span class="keyword">return</span> &amp;logger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">///设置是否打印到终端</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetLogToTerminal</span><span class="params">(<span class="type">bool</span> logToTerminal)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">GetLogToTerminal</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置是否打印到日志文件当中</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetLogToLogFile</span><span class="params">(<span class="type">bool</span> logToLogFile)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">GetLogToLogFile</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置日志文件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetLogFile</span><span class="params">(<span class="type">const</span> std::string&amp; logFileName)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置日志级别</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetLogLevel</span><span class="params">(LOG_LEVEL level)</span></span>;</span><br><span class="line">    <span class="function">LOG_LEVEL <span class="title">GetLogLevel</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如何使用message类  类和类之间的关系 Logger&amp;Message</span></span><br><span class="line">    <span class="comment">// void append(const Message&amp; msg)</span></span><br><span class="line">    <span class="type">void</span> <span class="keyword">operator</span>+=(<span class="type">const</span> Message &amp;msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_logToTerminal)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 打印到终端里边的日志 需要带颜色</span></span><br><span class="line">            std::cout &lt;&lt; msg.<span class="built_in">ToString</span>(<span class="literal">true</span>) &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_logToLogFile)</span><br><span class="line">        &#123;</span><br><span class="line">            m_logFile &lt;&lt; msg.<span class="built_in">ToString</span>(<span class="literal">false</span>) &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//假如遇到FATAL级别的日志，说明文件出现处理不了的错误，需要终止，为了不影响其他级别的日志输出，所以单独列出</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">if</span> (msg.<span class="built_in">ToString</span>().<span class="built_in">find</span>(<span class="string">&quot;FATAL&quot;</span>) != std::string::npos)</span><br><span class="line">        &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;fatal happened!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;logger.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">///设置是否打印到终端</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::SetLogToTerminal</span><span class="params">(<span class="type">bool</span> logToTerminal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_logToTerminal = logToTerminal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Logger::GetLogToTerminal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_logToTerminal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置是否打印到日志文件当中</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::SetLogToLogFile</span><span class="params">(<span class="type">bool</span> logToLogFile)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_logToLogFile = m_logToLogFile;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Logger::GetLogToLogFile</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_logToLogFile;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//设置日志文件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::SetLogFile</span><span class="params">(<span class="type">const</span> std::string &amp;logFileName = <span class="string">&quot;dsf.log&quot;</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_logFile.<span class="built_in">is_open</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//如果m_logFile已经打开了其他文件就先将其关闭，然后再打开指定的日志文件</span></span><br><span class="line">        m_logFile.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    m_logFile.<span class="built_in">open</span>(logFileName);</span><br><span class="line">    <span class="comment">//既然打开了日志文件，肯定是要网日志文件当中写入的</span></span><br><span class="line">    m_logToLogFile = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置日志级别</span></span><br><span class="line"><span class="comment">//通过环境变量来设置，getenv(),环境变量可以通过自己来设置（expor）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::SetLogLevel</span><span class="params">(LOG_LEVEL level)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_level = level;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LOG_LEVEL <span class="title">Logger::GetLogLevel</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_level;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Message msg1(INFO, __FILE__, __FUNCTION__, __LINE__);</span></span><br><span class="line"><span class="comment">    Message msg2(ERROR, __FILE__, __FUNCTION__, __LINE__);</span></span><br><span class="line"><span class="comment">    Message msg3(FATAL, __FILE__, __FUNCTION__, __LINE__);</span></span><br><span class="line"><span class="comment">    Message msg4(DEBUG, __FILE__, __FUNCTION__, __LINE__);</span></span><br><span class="line"><span class="comment">    msg1 &lt;&lt; &quot;hello world1&quot;;</span></span><br><span class="line"><span class="comment">    msg2 &lt;&lt; &quot;hello world2&quot;;</span></span><br><span class="line"><span class="comment">    msg3 &lt;&lt; &quot;hello world3&quot;;</span></span><br><span class="line"><span class="comment">    msg4 &lt;&lt; &quot;hello world4&quot;;</span></span><br><span class="line"><span class="comment">    std::cout &lt;&lt; msg1.ToString() &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">    std::cout &lt;&lt; msg2.ToString() &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">    std::cout &lt;&lt; msg3.ToString() &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">    std::cout &lt;&lt; msg4.ToString() &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   LOG_INFO&lt;&lt;<span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">   LOG_ERROR&lt;&lt;<span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">   LOG_DEBUG&lt;&lt;<span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">   LOG_FATAL&lt;&lt; <span class="string">&quot;hello world!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>测试截图：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729171429467.png" alt="image-20220729171429467"></p>
<h2 id="（四）、封装TCP连接类"><a href="#（四）、封装TCP连接类" class="headerlink" title="（四）、封装TCP连接类"></a>（四）、封装TCP连接类</h2><p>先来回顾一下tcp的编程流程，</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729180823959.png" alt="image-20220729180823959"></p>
<p>使用API接口编程十分的繁琐，没产生一个服务器或者客户端就需要进行一次上面的流程，非常的麻烦，所以我将其封装到一个类当中，以方便的创建服务器端和客户端</p>
<p>类图：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729181027754.png" alt="image-20220729181027754"></p>
<h4 id="封装IP和port类："><a href="#封装IP和port类：" class="headerlink" title="封装IP和port类："></a>封装IP和port类：</h4><p>将IP和端口封装到一个类当中，在调用的时候直接调用方法就可以了</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729183806790.png" alt="image-20220729183806790"></p>
<p>代码实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __IPADDRESSPORT_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __IPADDRESSPORT_H__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//封装IP地址和端口号</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IpAddressPort</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string m_ip;   <span class="comment">//IP地址</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">short</span> m_port; <span class="comment">//端口号</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">IpAddressPort</span>(std::string,<span class="type">unsigned</span> <span class="type">short</span>);</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetIpAddress</span><span class="params">(std::string)</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">GetIpAddress</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetPort</span><span class="params">(<span class="type">unsigned</span> <span class="type">short</span>)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">unsigned</span> <span class="type">short</span> <span class="title">GetPort</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">ToString</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;ipAddressPort.h&quot;</span></span></span><br><span class="line">IpAddressPort::<span class="built_in">IpAddressPort</span>(std::string ip = <span class="string">&quot;127.0.0.1&quot;</span>, <span class="type">unsigned</span> <span class="type">short</span> port = <span class="number">3306</span>)</span><br><span class="line"> : <span class="built_in">m_ip</span>(ip), <span class="built_in">m_port</span>(port) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">IpAddressPort::SetIpAddress</span><span class="params">(std::string ip)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_ip = ip;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::string <span class="title">IpAddressPort::GetIpAddress</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_ip;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">IpAddressPort::SetPort</span><span class="params">(<span class="type">unsigned</span> <span class="type">short</span> port)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_port = port;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">short</span> <span class="title">IpAddressPort::GetPort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_port;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::string <span class="title">IpAddressPort::ToString</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; m_ip &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; m_port;</span><br><span class="line">    <span class="keyword">return</span> ss.<span class="built_in">str</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//测试用例，我们的IP和端口是有默认值的（127.0.0.1:3306）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    IpAddressPort ip_port;</span><br><span class="line">    std::cout&lt;&lt;ip_port.<span class="built_in">ToString</span>()&lt;&lt;std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试效果：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220729184111289.png" alt="image-20220729184111289"></p>
<h4 id="封装tcpClient和TCPServer"><a href="#封装tcpClient和TCPServer" class="headerlink" title="封装tcpClient和TCPServer"></a>封装tcpClient和TCPServer</h4><p>将客户端所需要的文件描述符和connect，send，recv等方法封装到一个类当中。</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730131847723.png" alt="image-20220730131847723"></p>
<p>代码实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __TCPCLIENT_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __TCPCLIENT_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;logger.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;ipAddressPort.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TcpClient</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_sfd; <span class="comment">//套接字描述符</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">TcpClient</span>(IpAddressPort &amp;ip_port);</span><br><span class="line">    ~<span class="built_in">TcpClient</span>();</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">SendMsg</span><span class="params">(<span class="type">const</span> std::string&amp; msg)</span></span>;<span class="comment">//发送消息</span></span><br><span class="line">    <span class="function">Msg <span class="title">RecvMsg</span><span class="params">()</span></span>;<span class="comment">//接收消息，m_msg作为传入参数，将接收到消息存入msg中,m_numberOFsend接收到的字节数</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">GetSfd</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;tcpClient.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//socket &amp;&amp; connect</span></span><br><span class="line">TcpClient::<span class="built_in">TcpClient</span>(IpAddressPort&amp; ip_port)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    m_sfd = <span class="built_in">socket</span>(AF_INET,SOCK_STREAM,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(m_sfd == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> saddr;</span><br><span class="line">    <span class="built_in">memset</span>(&amp;saddr,<span class="number">0</span>,<span class="built_in">sizeof</span>(saddr));</span><br><span class="line"></span><br><span class="line">    saddr.sin_family = AF_INET;</span><br><span class="line">    saddr.sin_addr.s_addr = <span class="built_in">inet_addr</span>(ip_port.<span class="built_in">GetIpAddress</span>().<span class="built_in">c_str</span>());</span><br><span class="line">    saddr.sin_port = <span class="built_in">htons</span>(ip_port.<span class="built_in">GetPort</span>());</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> fd = <span class="built_in">connect</span>(m_sfd,(<span class="keyword">struct</span> sockaddr*)&amp;saddr,<span class="built_in">sizeof</span>(saddr));</span><br><span class="line">    <span class="keyword">if</span>(fd == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LOG_INFO &lt;&lt; <span class="string">&quot;connect sucess&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//close</span></span><br><span class="line">TcpClient::~<span class="built_in">TcpClient</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == <span class="built_in">close</span>(m_sfd))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//send</span></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">TcpClient::SendMsg</span><span class="params">(<span class="type">const</span> std::string &amp;msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> numberOfSend = <span class="built_in">send</span>(m_sfd,&amp;msg,<span class="built_in">strlen</span>(msg.<span class="built_in">c_str</span>()),<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == numberOfSend)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> numberOfSend;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//recv</span></span><br><span class="line"><span class="function">Msg <span class="title">TcpClient::RecvMsg</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> buf[MEDIA_BUF_LEN] =&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> numberOfRecv = <span class="built_in">recv</span>(m_sfd,buf,MEDIA_BUF_LEN,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(numberOfRecv == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function">Msg <span class="title">msg</span><span class="params">(buf,numberOfRecv)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">TcpClient::GetSfd</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_sfd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">IpAddressPort <span class="title">cli</span><span class="params">(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">5000</span>)</span></span>;</span><br><span class="line">    <span class="function">TcpClient <span class="title">Client</span><span class="params">(cli)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>服务端和客户端基本上是一致的，不同点在于，我们需要在服务端的构造函数中封装更多的东西（socket&#x2F;bind&#x2F;listen）,此外服务端的accept也需要独立出来。</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730132210416.png" alt="image-20220730132210416"></p>
<p>代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __TCPSERVER_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __TCPSERVER_H__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;logger.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ipAddressPort.h&quot;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TcpServer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_lfd;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">TcpServer</span>(IpAddressPort&amp; ip_port);</span><br><span class="line">    ~<span class="built_in">TcpServer</span>();</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">Accept</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">SendMsg</span><span class="params">(<span class="type">int</span> ,<span class="type">const</span> std::string &amp;msg)</span></span>; <span class="comment">//发送消息</span></span><br><span class="line">    <span class="function">Msg <span class="title">RecvMsg</span><span class="params">(<span class="type">int</span>)</span></span>; <span class="comment">//接收消息，m_msg作为传入参数，将接收到消息存入msg中,m_numberOFsend接收到的字节数</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">GetSfd</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;tcpServer.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">TcpServer::<span class="built_in">TcpServer</span>(IpAddressPort &amp;ip_port)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//socket</span></span><br><span class="line">    m_lfd = <span class="built_in">socket</span>(AF_INET,SOCK_STREAM,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">-1</span> == m_lfd)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> saddr;</span><br><span class="line">    <span class="built_in">memset</span>(&amp;saddr,<span class="number">0</span>,<span class="built_in">sizeof</span>(saddr));</span><br><span class="line"></span><br><span class="line">    saddr.sin_addr.s_addr = <span class="built_in">inet_addr</span>(ip_port.<span class="built_in">GetIpAddress</span>().<span class="built_in">c_str</span>());</span><br><span class="line">    saddr.sin_family = AF_INET;</span><br><span class="line">    saddr.sin_port = <span class="built_in">htons</span>(ip_port.<span class="built_in">GetPort</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//bind</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="number">-1</span> == <span class="built_in">bind</span>(m_lfd,(<span class="keyword">struct</span> sockaddr*)&amp;saddr,<span class="built_in">sizeof</span>(saddr)))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt;<span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//listen</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="number">-1</span> == <span class="built_in">listen</span>(m_lfd,<span class="number">5</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//close</span></span><br><span class="line">TcpServer::~<span class="built_in">TcpServer</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">-1</span> == <span class="built_in">close</span>(m_lfd))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_FATAL &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">TcpServer::Accept</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> cli;</span><br><span class="line">    <span class="type">socklen_t</span> len = <span class="built_in">sizeof</span>(cli);</span><br><span class="line">    <span class="type">int</span> cfd = <span class="built_in">accept</span>(m_lfd, (<span class="keyword">struct</span> sockaddr *)&amp;cli, &amp;len);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == cfd)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> clientIpBuf[SMALL_BUF_LEN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">inet_ntop</span>(AF_INET, &amp;cli.sin_addr, clientIpBuf, SMALL_BUF_LEN))</span><br><span class="line">        &#123;</span><br><span class="line">            LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 数据的转换   网络字节序 -》 本机字节序</span></span><br><span class="line">            std::string <span class="built_in">clientIp</span>(clientIpBuf);</span><br><span class="line">            <span class="type">unsigned</span> <span class="type">short</span> clientPort = <span class="built_in">ntohs</span>(cli.sin_port);</span><br><span class="line">            <span class="function">IpAddressPort <span class="title">ipAddressPort</span><span class="params">(clientIp, clientPort)</span></span>;</span><br><span class="line">            LOG_INFO &lt;&lt; ipAddressPort.<span class="built_in">ToString</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cfd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">TcpServer::SendMsg</span><span class="params">(<span class="type">int</span> cfd, <span class="type">const</span> std::string &amp;msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> numberOfSendByte = <span class="built_in">send</span>(cfd, msg.<span class="built_in">c_str</span>(), <span class="built_in">strlen</span>(msg.<span class="built_in">c_str</span>()), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == numberOfSendByte)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numberOfSendByte;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Msg <span class="title">TcpServer::RecvMsg</span><span class="params">(<span class="type">int</span> cfd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> buf[LARGE_BUF_LEN] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> numberOfRecvByte = <span class="built_in">recv</span>(cfd, buf, LARGE_BUF_LEN, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">-1</span> == numberOfRecvByte)</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">strerror</span>(errno);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Msg&#123;buf, numberOfRecvByte&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="type">const</span> <span class="title">TcpServer::GetSfd</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_lfd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">IpAddressPort <span class="title">cli</span><span class="params">(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">5000</span>)</span></span>;</span><br><span class="line">    <span class="function">TcpServer <span class="title">ser</span><span class="params">(cli)</span></span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> cfd = ser.<span class="built_in">Accept</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">-1</span> == cfd)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><p>当我们的项目进行到当前位置时，我们的所有源代码经过编译之后应该生成两个可执行文件，分别是client和server，此时已经不能再用之前的方式进行编译了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">给每个子文件夹下都加上CmakLists.txt文件是不可行的，因为子文件架下的CmakLists.txt只可见当前文件夹下的所有文件，对于我们要生成多个可执行文件是行不通的。</span><br></pre></td></tr></table></figure>

<p>此时们应该上升到src文件夹下面</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730132738608.png" alt="image-20220730132738608"></p>
<p><em>只需要对部分源文件进行编译时，直接将需要的源文件放到目标文件的后面因为 .&#x2F;utils里面包括了tcpClient.cpp和tcpServer.cpp两个源文件，所以不能通过aux_source_directory(.&#x2F;utils&#x2F;</em> UTILS)的方法生成两个不同的可执行文件。*</p>
<p>此时子文件夹下没有cmake文件，只有src下面有，内容为：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_definitions</span>(<span class="string">&quot;-g -std=c++11&quot;</span>) </span><br><span class="line"><span class="keyword">add_executable</span>(client ./logger/logger.cpp ./logger/<span class="keyword">message</span>.cpp ./logger/timeStamp.cpp ./utils/tcpClient.cpp ./utils/ipAddressPort.cpp)</span><br><span class="line"><span class="keyword">add_executable</span>(server ./logger/logger.cpp ./logger/<span class="keyword">message</span>.cpp ./logger/timeStamp.cpp ./utils/tcpServer.cpp ./utils/ipAddressPort.cpp)</span><br></pre></td></tr></table></figure>

<h6 id="测试结果："><a href="#测试结果：" class="headerlink" title="测试结果："></a>测试结果：</h6><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730133009527.png" alt="image-20220730133009527"></p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730133120133.png" alt="image-20220730133120133"></p>
<h2 id="五-、封装线程类"><a href="#五-、封装线程类" class="headerlink" title="(五)、封装线程类"></a>(五)、封装线程类</h2><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220730172546525.png" alt="image-20220730172546525"></p>
<h5 id="协程是如何实现的"><a href="#协程是如何实现的" class="headerlink" title="协程是如何实现的?"></a>协程是如何实现的?</h5><h4 id="线程函数为什么要设置成静态的呢？"><a href="#线程函数为什么要设置成静态的呢？" class="headerlink" title="线程函数为什么要设置成静态的呢？"></a>线程函数为什么要设置成静态的呢？</h4><p>因为我pthread_create()要求的thread_fun函数有要求，  只能有一个（void*)参数，如果非静态，就会默认含有一个（this.)，故要设置为静态的。</p>
<p>将线程函数设置成静态之后，随之而来又会产生问题，静态成员函数只能访问静态成员变量，那么我们的静态成员函数如何访问我们的内部成员变量呢？这时我们只需要将this*当做参数传入到线程函数当中就可以进行间接的访问了。</p>
<h4 id="线程间通信："><a href="#线程间通信：" class="headerlink" title="线程间通信："></a>线程间通信：</h4><p>socketpair：创建一个全局的无名管道</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int socketpair（）</span><br></pre></td></tr></table></figure>

<p>pipe</p>
<p>全局变量</p>
<h2 id="项目分析："><a href="#项目分析：" class="headerlink" title="项目分析："></a>项目分析：</h2><p>项目逻辑架构：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220803152716787.png" alt="image-20220803152716787"></p>
<p>此项以上的记录只完成了网络层的编程准备，相应的组件封装工作。</p>
<h2 id="封装reactor、ctroller和View"><a href="#封装reactor、ctroller和View" class="headerlink" title="封装reactor、ctroller和View"></a>封装reactor、ctroller和View</h2><h3 id="reactor："><a href="#reactor：" class="headerlink" title="reactor："></a>reactor：</h3><h4 id="什么是reactor？"><a href="#什么是reactor？" class="headerlink" title="什么是reactor？"></a>什么是reactor？</h4><ol>
<li>事件驱动（event handling）</li>
<li>可以处理一个或多个输入源（one or more inputs）</li>
<li>通过Service Handler同步的将输入事件（Event）采用多路复用分发给相应的Request Handler（多个）处理</li>
</ol>
<p>reactor就是将IO复用中的一些接口封装起来，封装成一个类。来一个相应的事件，reactor就有对应的响应。</p>
<h4 id="结合到项目当中"><a href="#结合到项目当中" class="headerlink" title="结合到项目当中"></a>结合到项目当中</h4><p>当我们的服务器在监听来自客户端的请求时listen函数处于循环工作状态，accept出去阻塞状态，当有完成三次握手的请求后，会唤醒accept函数，对请求给与相应的处理。</p>
<p>此时系统会给与其分配线程处理请求</p>
<h4 id="one-loop-per-thread：一个线程配一个reactor每个reactor都监听自己的thread。"><a href="#one-loop-per-thread：一个线程配一个reactor每个reactor都监听自己的thread。" class="headerlink" title="one loop per thread：一个线程配一个reactor每个reactor都监听自己的thread。"></a>one loop per thread：一个线程配一个reactor每个reactor都监听自己的thread。</h4><h4 id="C-中的MVC（分层都是为了解耦）"><a href="#C-中的MVC（分层都是为了解耦）" class="headerlink" title="C++中的MVC（分层都是为了解耦）"></a>C++中的MVC（分层都是为了解耦）</h4><ul>
<li><p>medel:数据的存储模块，底层封装了（orm：对象关系映射）把数据库表中的一行映射成程序中的一个对象。</p>
</li>
<li><p>view：具体业务的实现方式，处理函数（多态）</p>
</li>
<li><p>ctroller：上层传下数据之后，根据具体的业务，为其分配对应的view层处理函数</p>
</li>
</ul>
<p>在我们的程序当中，有我们的子线程来处理IO事件，那么我给每个子线程配一个ctroller，这个ctroller里面存一个MAP表，里面只有一个方法，process，将拿到的数据转到处理他的方法当中<img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220802142150145.png" alt="image-20220802142150145"></p>
<p>业务的处理函数在view层当中。</p>
<h4 id="使用mysql提供的API接口封装一个MySQLDB类，用来做项目的持久化层，存储数据，建库建表，增删改查等业务。"><a href="#使用mysql提供的API接口封装一个MySQLDB类，用来做项目的持久化层，存储数据，建库建表，增删改查等业务。" class="headerlink" title="使用mysql提供的API接口封装一个MySQLDB类，用来做项目的持久化层，存储数据，建库建表，增删改查等业务。"></a>使用mysql提供的API接口封装一个MySQLDB类，用来做项目的持久化层，存储数据，建库建表，增删改查等业务。</h4><p>mysql业务代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mysql.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;public.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;logger.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MySQLDB::Connect</span><span class="params">(<span class="type">const</span> std::string &amp;ip, <span class="type">unsigned</span> <span class="type">short</span> port,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> std::string &amp;user, <span class="type">const</span> std::string &amp;password,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> std::string &amp;db)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_mySqlClient = <span class="built_in">mysql_init</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="comment">// 三次握手 认证 鉴权  xxx  四次挥手  10s  1s</span></span><br><span class="line">    <span class="comment">// 连接池  初始连接量 最大连接量  最大的等待时间(空闲时间)10s</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">mysql_real_connect</span>(m_mySqlClient,</span><br><span class="line">        ip.<span class="built_in">c_str</span>(), user.<span class="built_in">c_str</span>(), password.<span class="built_in">c_str</span>(),</span><br><span class="line">         db.<span class="built_in">c_str</span>(), <span class="number">3306</span>, <span class="literal">nullptr</span>, <span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="string">&quot;mysql_real_connect() failed!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LOG_INFO &lt;&lt; <span class="string">&quot;mysql connect success!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// snprintf /  stringstream</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">MySQLDB::Query</span><span class="params">(std::string &amp;&amp;sql)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// return value</span></span><br><span class="line">    LOG_INFO &lt;&lt; <span class="string">&quot;sql:&quot;</span> &lt;&lt; sql;</span><br><span class="line">    <span class="comment">// 执行成功返回0</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mysql_query</span>(m_mySqlClient, sql.<span class="built_in">c_str</span>()))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">mysql_error</span>(m_mySqlClient);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">mysql_num_rows</span>(<span class="built_in">mysql_store_result</span>(m_mySqlClient));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MySQLDB::Insert</span><span class="params">(std::string &amp;&amp;sql)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// return value</span></span><br><span class="line">    LOG_INFO &lt;&lt; <span class="string">&quot;sql:&quot;</span> &lt;&lt; sql;</span><br><span class="line">    <span class="comment">// 执行成功返回0</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mysql_query</span>(m_mySqlClient, sql.<span class="built_in">c_str</span>()))</span><br><span class="line">    &#123;</span><br><span class="line">        LOG_ERROR &lt;&lt; <span class="built_in">mysql_error</span>(m_mySqlClient);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySQLDB::~<span class="built_in">MySQLDB</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_mySqlClient != <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mysql_close</span>(m_mySqlClient);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MySQLDB* m = MySQLDB::<span class="built_in">GetInstance</span>();</span><br><span class="line">    m-&gt;<span class="built_in">Connect</span>(MYSQL_IP, yj::MYSQLDB_PORT, USER, PASSWORD, DB);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// // snprintf   sstrem</span></span><br><span class="line">    <span class="comment">// char sql[LARGE_BUF_LEN] = &#123;0&#125;;</span></span><br><span class="line">    std::string name = <span class="string">&quot;xcg&quot;</span>;</span><br><span class="line">    std::string password = <span class="string">&quot;345&quot;</span>;</span><br><span class="line"></span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">&quot;select * from user where name=\&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot;\&quot; and password=\&quot;&quot;</span> &lt;&lt; password &lt;&lt; <span class="string">&quot;\&quot; limit 1;&quot;</span>;</span><br><span class="line">    <span class="comment">// snprintf(sql, LARGE_BUF_LEN, &quot;select * from user where name = %s and password = %s&quot;, name.c_str(), password.c_str());</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; m-&gt;<span class="built_in">Query</span>(std::<span class="built_in">move</span>(ss.<span class="built_in">str</span>())) &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em><strong><u>遇到问题：在编译时mysql、mysql.h文件找到到，无法调用mysql的接口文件，在经过查询之后，发现是因为找不到相应的头文件，所以无法调用API，然后我将声明改成了绝对路径，程序成功通过编译生成可执行程序。</u></strong></em></p>
<p><em><strong><u>以后遇到类似问题也可以以此种方法尝试解决。</u></strong></em></p>
<p>安装Redis和docker：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##docker</span></span></span><br><span class="line">sudo apt-get install manpages-posix manpages-posix-dev</span><br><span class="line">apt install docker-ce docker-ce-cli</span><br><span class="line">docker command</span><br><span class="line">docker exec -it 33b59573a334 /bin/bashmysql -uroot -p</span><br><span class="line">I</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##redis 在root下进行</span></span></span><br><span class="line">- wget https://github.com/redis/hiredis/archive/refs/tags/v1.0.2.tar-gz</span><br><span class="line">- tar -zxvf v1.0.2.tar-gz- cd xxx</span><br><span class="line">- make hiredis-1.0.2 </span><br><span class="line">- make install</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>负载均衡：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220804115232333.png" alt="image-20220804115232333"></p>
<p>nginx负载均衡组件，内部含有多种负载均衡算法。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## redis的镜像及容器的安装部署</span></span></span><br><span class="line">docker pull redis</span><br><span class="line">docker run --name dsf-redis -d redis =&gt; 容器</span><br><span class="line">docker exec -it 上一步产生的容器id /bin/bash</span><br><span class="line">redis-cli -h 127.0.0.1 -p 6379</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## mysql的镜像及容器的安装部署</span></span></span><br><span class="line">docker pull mysql:5.7.32</span><br><span class="line">docker run --name dsf-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=你的root密码 -d mysql:5.7.32 =&gt; 容器id</span><br><span class="line">docker exec -it 上一步产生的容器id /bin/bash</span><br><span class="line">mysql -uroot -p1234</span><br><span class="line">xxx</span><br><span class="line">xxx</span><br><span class="line">xx</span><br><span class="line">exit;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220804125113601.png" alt="image-20220804125113601"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:18.04</span><br><span class="line">MAINTAINER lsc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译构建开发工具</span></span><br><span class="line">RUN apt-get update --fix-missing &amp;&amp; apt-get install -y fontconfig --fix-missing -y</span><br><span class="line">RUN apt-get install wget -y</span><br><span class="line">RUN apt-get install gcc -y</span><br><span class="line">RUN apt-get install gdb -y</span><br><span class="line">RUN apt-get install g++ -y</span><br><span class="line">RUN apt-get install make -y</span><br><span class="line">RUN apt-get install vim -y</span><br><span class="line">RUN apt-get install cmake -y</span><br><span class="line">RUN apt-get install git -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysql&amp;redis的中间件  mysql-server redis-server</span></span><br><span class="line">RUN apt-get install mysql-server -y</span><br><span class="line">RUN apt-get install redis  -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">libevent&amp;redis&amp;mysql的头文件以及动态库</span></span><br><span class="line">RUN apt-get install libmysqlclient-dev -y</span><br><span class="line">RUN apt-get install libevent-dev -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、redis的api和so</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN wget https://github.com/redis/hiredis/archive/refs/tags/v1.0.2.tar.gz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN tar -zxvf v1.0.2.tar.gz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN <span class="built_in">cd</span> hiredis-1.0.2</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN make</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN make install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、git下载不了代码  ssh的私钥配置的有问题  git <span class="built_in">clone</span> dsf的代码</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">WORKDIR /tmp</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">COPY id_rsa .</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN git <span class="built_in">clone</span> git@gitee.com:lexingsen/dsf-lsc.git</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/Linux%E9%A1%B9%E7%9B%AE-lsc/" data-id="cllwc4xgz000ajsmoh0ah3ab4" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-K个一组翻转链表" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/K%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.526Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="K个一组翻转链表"><a href="#K个一组翻转链表" class="headerlink" title="K个一组翻转链表"></a>K个一组翻转链表</h3><p>题目描述：</p>
<p>给你链表的头节点 head ，每 k 个节点一组进行翻转，请你返回修改后的链表。</p>
<p>k 是一个正整数，它的值小于或等于链表的长度。如果节点总数不是 k 的整数倍，那么请将最后剩余的节点保持原有顺序。</p>
<p>你不能只是单纯的改变节点内部的值，而是需要实际进行节点交换。</p>
<p>解题思路：</p>
<p>当看到这道题的时候，不自觉的让我想起了，翻转链表的那道题目，直接使用头插法，将链表翻转；这道题也应该是同理，我们将给定链表的每一组当做一个单独的链表，然后将其翻转，最后将反转之后的链表进行连接就可以得到结果。那么，实际操作一下吧！</p>
<p>首先我们需要一个逆置链表的算法，很简单使用头插法实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ListNode* <span class="title">reverseLink</span><span class="params">(ListNode* head)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ListNode* pre = head;</span><br><span class="line">    ListNode* cur = <span class="literal">NULL</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(head)</span><br><span class="line">    &#123;</span><br><span class="line">        ListNode* tmp = head-&gt;next;</span><br><span class="line">        pre-&gt;next = cur;</span><br><span class="line">        cur = pre;</span><br><span class="line">        pre = tmp; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>得到逆置链表的程序之后，我们就该想想，应该如何去将一个链表分成K组并完成单独的翻转：</p>
<ol>
<li><p>首先们需要一个头结点来保存链表的头，避免再反转的过程当中失去了链表的头结点，这样链表也就失去了作用；</p>
</li>
<li><p>根据题目要求，我们可以将链表分为三个部分：已经反转，准备翻转和未翻转；</p>
</li>
<li><p>如何确定准备翻转的链表呢，并且保证链表再反转之后还能与原来的链表连接到一起呢？ </p>
<ul>
<li>首先使用K循环找到我们准备翻转的链表</li>
<li>对我们找到的链表进行翻转，然后与原来的链表相连接</li>
<li>直到找到最后一个节点为止。</li>
</ul>
<p>实操一下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ListNode* <span class="title">reverseKGroup</span><span class="params">(ListNode* head,<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ListNode ret;</span><br><span class="line">    ret.next = head;</span><br><span class="line">    ListNode* pre = &amp;ret;</span><br><span class="line">    ListNode* end = &amp;ret;</span><br><span class="line">    <span class="comment">//要保证一直找到最后一个节点</span></span><br><span class="line">    <span class="keyword">while</span>(end-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//首先我们需要找到需要翻转的链表</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k &amp;&amp; end != <span class="literal">NULL</span>;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            end = end-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果end==NULL说明最后剩下的节点不到K个，就不用翻转直接进行连接</span></span><br><span class="line">        <span class="keyword">if</span>(end == <span class="literal">NULL</span>) <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//将要翻转的部分和暂时不用翻转的部分分别保存下来，为下一步的连接进行准备</span></span><br><span class="line">        ListNode* start = pre-&gt;next;</span><br><span class="line">        ListNode* next = end-&gt;next;</span><br><span class="line">        </span><br><span class="line">        end-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        pre-&gt;next = <span class="built_in">reverseLink</span>(start);</span><br><span class="line">        start-&gt;next = next；</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//运行到这一步，准备翻转的链表就已经翻转完毕了，然后翻转下一组；</span></span><br><span class="line">        pre = start;</span><br><span class="line">        end = pre;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ret.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有人好奇的是我们在进行第一组翻转之后，如何保证反转之后的链表还是和后面的链表保持连接的呢？</p>
<p>我们在第一步，寻找准备翻转链表的时候，循环完毕end的值应该指向的是准备翻转链表的最后一个节点，此时我们有声明了两个节点，分别是start和next，start保存的是准备翻转链表的头结点，next指向的是end-&gt;next，也就是下一组准备翻转链表的头结点，</p>
<p>重点就是这两个接点，当翻转之后，start成了翻转链表的尾结点，我们让start-&gt;next &#x3D; next；就可以是的翻转之后的链表与原来的链表进行连接了。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/K%E4%B8%AA%E4%B8%80%E7%BB%84%E7%BF%BB%E8%BD%AC%E9%93%BE%E8%A1%A8/" data-id="cllwc4xgr0007jsmo9xv59b4o" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-git分布式代码管理器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/git%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.518Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="git-分布式代码管理器"><a href="#git-分布式代码管理器" class="headerlink" title="git 分布式代码管理器"></a>git 分布式代码管理器</h1><p>我们的代码不会总是一次就能完成的，在我们平时的工作过程中，有时候一个项目需要长时间，多人的协作完成，这个时候代码管理起来就会比较困难。</p>
<p>使用Git来管理代码就会方便很多，我们每次将自己写好的代码进行提交，提交到本主机的版本仓库中，然后在通过远程提交到远程仓库中，这样大家就都可以看到我们所写的代码，便于大家协同操作，其中还有版本信息方便我们退回到某一版本重新编写。</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220310202935636.png" alt="image-20220310202935636"></p>
<h2 id="Git的四个分区"><a href="#Git的四个分区" class="headerlink" title="Git的四个分区"></a>Git的四个分区</h2><p>git在本地有三个工作域：工作区，暂存区，资源库，再加上远程服务器端的git仓库一共就是四个分区。其工作关系如下：</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220310204238625.png" alt="image-20220310204238625"></p>
<p><strong>工作区（workspace）：</strong>就是你平时存放项目代码的地方</p>
<p>**暂存区（index&#x2F;stage）:**用于临时存放我们的改动，他只是一个文件，用于保存即将提交到文件列表的信息</p>
<p><strong>仓库区（repository）</strong>： 用于安全存放数据的位置，这里面有我们提交的所有版本的数据。其中HEAD指向最新放入仓库的版本</p>
<p><strong>远程仓库（remote）：</strong>托管代码的服务器。</p>
<h2 id="git的工作流程"><a href="#git的工作流程" class="headerlink" title="git的工作流程"></a>git的工作流程</h2><ol>
<li>在工作区进行添加修改文件</li>
<li>将修改的文件添加到暂存区</li>
<li>将暂存区的文件添加到git仓库</li>
</ol>
<h2 id="文件的四种状态"><a href="#文件的四种状态" class="headerlink" title="文件的四种状态"></a>文件的四种状态</h2><p><strong>untracked:</strong></p>
<p><strong>unmodify:</strong></p>
<p><strong>modified:</strong></p>
<p><strong>staged:</strong></p>
<h2 id="git基本命令"><a href="#git基本命令" class="headerlink" title="git基本命令"></a>git基本命令</h2><p>我们应该在一个路径下专门建立一个文件夹用来存储可以通过git管理的仓库</p>
<p>通过&#x3D;&#x3D;git init&#x3D;&#x3D;将我们创建的目录变成一个可以通过git管理的仓库</p>
<p>创建完成，通过&#x3D;&#x3D;ls -a&#x3D;&#x3D;命令，我们可以看到当前路径下有一个“ .git”文件，就说明我们已经创建成功了。</p>
<p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220310210828631.png" alt="image-20220310210828631"></p>
<p>此时我的myGit就是一个通过git管理的仓库。</p>
<h3 id="注意：当我们第一次使用git-提交代码的时候我们需要先设置用户名及邮箱，之后就不需要了，这个操作的主要目的是定位每次提交的人是谁，以便于后面追踪bug来源。"><a href="#注意：当我们第一次使用git-提交代码的时候我们需要先设置用户名及邮箱，之后就不需要了，这个操作的主要目的是定位每次提交的人是谁，以便于后面追踪bug来源。" class="headerlink" title="注意：当我们第一次使用git 提交代码的时候我们需要先设置用户名及邮箱，之后就不需要了，这个操作的主要目的是定位每次提交的人是谁，以便于后面追踪bug来源。"></a>注意：当我们第一次使用git 提交代码的时候我们需要先设置用户名及邮箱，之后就不需要了，这个操作的主要目的是定位每次提交的人是谁，以便于后面追踪bug来源。</h3><h3 id="git-add-filename-添加文件到暂存区"><a href="#git-add-filename-添加文件到暂存区" class="headerlink" title="&#x3D;&#x3D;git add filename&#x3D;&#x3D;添加文件到暂存区"></a>&#x3D;&#x3D;git add filename&#x3D;&#x3D;添加文件到暂存区</h3><h3 id="git-status-查看仓库的状态"><a href="#git-status-查看仓库的状态" class="headerlink" title="&#x3D;&#x3D;git status&#x3D;&#x3D;查看仓库的状态"></a>&#x3D;&#x3D;git status&#x3D;&#x3D;查看仓库的状态</h3><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220310211048763.png" alt="image-20220310211048763"></p>
<h4 id="git-commit-m-“版本描述信息”-将暂存区的文件提交到版本仓库"><a href="#git-commit-m-“版本描述信息”-将暂存区的文件提交到版本仓库" class="headerlink" title="&#x3D;&#x3D;git commit -m “版本描述信息”&#x3D;&#x3D;将暂存区的文件提交到版本仓库"></a>&#x3D;&#x3D;git commit -m “版本描述信息”&#x3D;&#x3D;将暂存区的文件提交到版本仓库</h4><p><img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20220310211322497.png" alt="image-20220310211322497"></p>
<p>因为是第一次提交没有设置邮箱和姓名所以会有这个提示，设置一下就好了。</p>
<p>git log 查看提交的历史记录</p>
<p>git reflog 查看对仓库的操作日志</p>
<p>git diff HEAD  比较当前内容与最后一次提交的版本的差异</p>
<p>[git fetch]拉远程变更的代码</p>
<p>git checkout filename 放弃对filename在工区中的修改</p>
<p>【git pull】拉远程的代码</p>
<p>ssh-keygen -t rsa -C “邮箱”   ——生成秘钥</p>
<p>git remote add myremote “mayun地址”建立一个本地仓库，并与远程‘码云地址相连接’</p>
<p>git remote -v   查看我们的git连接情况</p>
<p>git checkout -b master 切换分支到master</p>
<p>git branch -a  查看本地分支</p>
<p>git branch -r 查看远程分支</p>
<p>cd &#x2F;etc&#x2F;ssh&#x2F;  cat </p>
<p>service ssh restart:启动ssh服务</p>
<p>systemctl restart ssh:同上，启动ssh服务</p>
<p>lsof -i:22 查看端口</p>
<p>cmake 编译构建工具</p>
<p>用法：</p>
<p>​    CMakeList.txt的配置</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#环境变量 PROJECT_SOURCE_DIR</span></span><br><span class="line">cmake_minimum_re</span><br></pre></td></tr></table></figure>

<p>CMakeLists.txt是Cmake的指令文件，类似于make的makefile。</p>
<p>编写完CMakeLists.txt之后，执行下面的命令生成makefile等文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake  CMakeLists.txt</span><br></pre></td></tr></table></figure>

<p>执行过后，目录如下所示，会多出<code>CMakeCache.txt</code>、<code>cmake_install.cmake</code>和<code>Makefile</code>三个文件，以及一个名为<code>CMakeFiles</code>的目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMakeCache.txt  CMakeFiles/  cmake_install.cmake  CMakeLists.txt  main.c  Makefile  operations.c  operations.h</span><br></pre></td></tr></table></figure>

<p>这些文件生成以后，直接执行make命令开始编译：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>

<h2 id="最简洁的用法"><a href="#最简洁的用法" class="headerlink" title="最简洁的用法"></a>最简洁的用法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required (VERSION 2.6)</span><br><span class="line">project (Tutorial)</span><br><span class="line">add_executable(Tutorial tutorial.cxx)</span><br></pre></td></tr></table></figure>

<p>第一行限定camek的版本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required (VERSION 2.6)</span><br></pre></td></tr></table></figure>

<p>第二行设置项目名称：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">project (Tutorial)</span><br></pre></td></tr></table></figure>

<p>第三行添加源代码文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_executable(Tutorial tutorial.cxx)</span><br></pre></td></tr></table></figure>

<h2 id="稍微复杂一点的例子——带有编译选项"><a href="#稍微复杂一点的例子——带有编译选项" class="headerlink" title="稍微复杂一点的例子——带有编译选项"></a>稍微复杂一点的例子——带有编译选项</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"></span><br><span class="line"># projectname is the same as the main-executable</span><br><span class="line">project(demo-fake)</span><br><span class="line"></span><br><span class="line"># 添加编译选项</span><br><span class="line">add_definitions(&#x27;-g&#x27;)</span><br><span class="line">add_definitions(&#x27;-Wall&#x27;)</span><br><span class="line"></span><br><span class="line"># -D定义宏变量</span><br><span class="line">add_definitions(&#x27;-D_FILE_OFFSET_BITS=64&#x27;)</span><br><span class="line">add_definitions(&#x27;-DFUSE_USE_VERSION=26&#x27;)</span><br><span class="line"></span><br><span class="line"># 查找当前目录中的所有源文件，并将结果列表存放在变量DIR_SRCS中</span><br><span class="line">aux_source_directory(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"># 指定可执行文件名称，PROJECT_NAME是前面定义的project名称</span><br><span class="line">add_executable($&#123;PROJECT_NAME&#125; $&#123;DIR_SRCS&#125;)</span><br><span class="line"></span><br><span class="line"># 添加依赖的链接库</span><br><span class="line">target_link_libraries($&#123;PROJECT_NAME&#125; fuse)</span><br></pre></td></tr></table></figure>

<p>C++有几种类的成员函数</p>
<p>map的底层</p>
<p>单例模式</p>
<p>git的问题解决</p>
<p>TimeStamp代码的实现</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/git%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8/" data-id="cllwc4xhg000ejsmo33t3gz83" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C语言小结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/C%E8%AF%AD%E8%A8%80%E5%B0%8F%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.355Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><ul>
<li><p>数值类型</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">整型：<span class="type">int</span> <span class="type">short</span> <span class="type">long</span> longlong</span><br><span class="line">字节数：<span class="number">4</span>   <span class="number">2</span>     <span class="number">4</span>      <span class="number">8</span></span><br><span class="line">浮点型：<span class="type">float</span>  <span class="type">double</span></span><br><span class="line">字节数： <span class="number">4</span>  		<span class="number">8</span></span><br></pre></td></tr></table></figure>

<h6 id="int-和-long-int的区别？"><a href="#int-和-long-int的区别？" class="headerlink" title="int 和 long int的区别？"></a>int 和 long int的区别？</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">二者的区别主要体现在不同的编译方式上，在不同的操作系统中表现出的位数不同，在早期的16位的系统上，int是2字节，long是4字节；后来发展到32位的系统，int和long相同，都是4字节；随着系统的发展现在到了64位的操作系统，int是4字节，long是八字节  </span><br></pre></td></tr></table></figure>

<h6 id="关于longlong"><a href="#关于longlong" class="headerlink" title="关于longlong"></a>关于longlong</h6><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">关于long long</span><br><span class="line"></span><br><span class="line">（1）long long在win32中是确实存在，长度为8个字节；定义为LONG64。</span><br><span class="line">为什么会出现long int呢，在win32现在系统中，长度为4；在历史上，或者其他某些系统中，int长度为2，是short int。</span><br><span class="line">即便是long long，在TI的有款平台中，长度为5</span><br><span class="line">也就是说，每种类型长度，需要sizeof才知道，如果可能，最好用union看看里面的数据，可以消除一些类型的假象长度。  </span><br><span class="line"></span><br><span class="line">（2）visual c++ 6.0中不支持，long long int，是在vc99中添加此功能的，所以我们在vc6.0中编译有long long 的数据时，会出错，但是在VS更高的版本中，是能通过的</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>字符类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char 大小为1字节</span><br></pre></td></tr></table></figure>
</li>
<li><p>指针类型：不管什么指针，大小都是<strong>4字节</strong></p>
</li>
<li><p>空类型：声明函数无返回值或者没有参数。声明空类型指针</p>
</li>
<li><p>自定义类型</p>
<ol>
<li><p>结构体</p>
<h5 id="结构体对齐方式："><a href="#结构体对齐方式：" class="headerlink" title="结构体对齐方式："></a>结构体对齐方式：</h5><ul>
<li>结构体第一个成员必须放到0偏移处</li>
<li>结构体成员的偏移量为自身的整数倍</li>
<li>结构体的大小只能是自身最大成员变量大小的整数倍</li>
</ul>
<h5 id="空结构体的大小为1"><a href="#空结构体的大小为1" class="headerlink" title="空结构体的大小为1"></a>空结构体的大小为1</h5><h5 id="柔性数组"><a href="#柔性数组" class="headerlink" title="柔性数组"></a>柔性数组</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">     </span><br></pre></td></tr></table></figure>


</li>
<li><p>共用体</p>
<p>所有成员公用一块内存，共用体所占内存的长度时最长成员的字节长度，有效提高了内存的利用效率。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">union 共用体名</span><br><span class="line">&#123;</span><br><span class="line">成员列表；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>枚举</p>
<p>【1】. 枚举类型如果没有初始化，默认第一个成员从0开始</p>
<p>【2】.枚举与宏的区别：</p>
<ul>
<li>宏是在与编译阶段进行的文本替换，而枚举是在编译阶段进行的处理，宏不能调试，枚举可以进行调试。</li>
<li>宏定义需要一条一条的进行定义，而枚举只需要定义一次就可以了。</li>
<li>宏作为指令存储在代码段；枚举作为常量存储在数据段；</li>
<li>枚举是将一类型的信息集合在一起，而宏相对比较分散一点</li>
<li>枚举中的每一项元素都是常量，是不可以赋值和更改的，但是我们可以在声明这个枚举的时候给个初始值。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="main函数的参数"><a href="#main函数的参数" class="headerlink" title="main函数的参数"></a>main函数的参数</h3><ul>
<li>第一个参数是int argc,代表包含文件名在内的命令行参数的个数；</li>
<li>第二个参数char *argv[]，是一个指针数组，里面包含文件名在内的命令行参数的首地址，数组的最后以NULL结尾。</li>
<li>第三个参数char * envp[],表示环境变量。</li>
</ul>
<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><h3 id="二级指针"><a href="#二级指针" class="headerlink" title="二级指针"></a>二级指针</h3><ul>
<li>二级指针存放的是一级指针的地址</li>
<li>对二级指针进行一次“*”引用。就可以访问一级指针，对其进行“**”引用就可以访问一级指针所指向的空间。</li>
</ul>
<h3 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h3><ul>
<li>定义：函数指针还是一个指针，只不过是指向一个函数的指针，在使用之前必须进行初始化，使他指向某个函数。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>* (*p)(<span class="type">char</span>*);<span class="comment">//p是一个函数指针，所指向的函数类型是返回值为char* ，有一个char*型参数的函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>函数指针数组：是一个存放函数指针的数组。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> （*（*p)[<span class="number">3</span>])(<span class="type">int</span>);<span class="comment">//p是一个具有三个元素的函数指针数组，p里面存放的函数指针所指向的函数类型是返回值为int参数为空的函数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数指针最常见的两个用途：转换表和回调函数。回调函数是将函数指针作为参数传递给另一个函数。</p>
</li>
</ul>
<h3 id="指针数组与数组指针"><a href="#指针数组与数组指针" class="headerlink" title="指针数组与数组指针"></a>指针数组与数组指针</h3><h4 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h4><p>指针数组是一个数组，只不过数组里面存放的都是指针</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int *p[];//因为[]比*优先级高，所以指针数组一定是不加（）的，让变量名先与[]结合</span><br></pre></td></tr></table></figure>

<h4 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h4><p>数组指针是一个指针，只不过它指向的的是一个数组，所以当指针加一是，他跳过的是整个数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int（*P)[3];//[]比*的优先级要高，所以要先加（）让*与变量名先进行结合</span><br></pre></td></tr></table></figure>

<h3 id="指针和数组之间的恩怨"><a href="#指针和数组之间的恩怨" class="headerlink" title="指针和数组之间的恩怨"></a>指针和数组之间的恩怨</h3><ol>
<li><strong>下标与*访问方式</strong>：数组有两种访问方式，一种是下标访问，一种是*访问，下标访问最终还是先被转化成   *访问的形式再进行访问的。</li>
<li><strong>数组参数和指针参数</strong>：当一位数组或者一级指针作为实参时，形参可以声明为数组形式，也可以声明成指针形式。这是因为一维数组做事餐时传递过去的是首元素地址，所以才可以用指针的形式接受，但一定要明白数组和指针之间是没有关系的，完全是两个概念。</li>
<li><strong>二维数组参数和二级指针参数</strong>：二维数组参数与数组指针参数是等效的；二级指针参数与指针数组参数是等效的。</li>
</ol>
<h3 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h3><h4 id="内存分配函数"><a href="#内存分配函数" class="headerlink" title="内存分配函数"></a>内存分配函数</h4><ol>
<li><p>malloc和calloc</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span>* <span class="built_in">malloc</span>（要开辟的字节数）;</span><br><span class="line"><span class="type">void</span>* <span class="title function_">calloc</span><span class="params">(元素个数，每个元素的字节数)</span>；</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这两个函数如果开辟失败会返回一个空指针，所以要对他们的返回值进行判空操作；他们返回的是空类型，所以要强制类型转换之后才能使用。calloc会将开辟空间默认初始化为0.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>realloc</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">realloc</span><span class="params">(原先已经分配的地址，重新要分配的字节数)</span>；</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">realloc用来修改原先已经分配大小的内存块。注意：realloc失败后也会返回空，所以要对返回值进行判断。realloc返回的地址有可能不是原来的地址，所以要接受他返回的值，最后不要忘了free。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用完动态内存后要free，不然会发生内存泄漏，且一块空间不能释放两次，也不能释放不属于你的空间，但是可以释放一块指向NULL的指针。free完成后要手动将指向这快递至的指针赋空。</p>
</li>
<li><p>使用动态内存可以模拟出二维数组的开辟。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> (*p)[<span class="number">4</span>] =(<span class="type">int</span> [<span class="number">3</span>])<span class="built_in">malloc</span>(<span class="number">3</span>*<span class="number">4</span>*<span class="keyword">sizeof</span>(<span class="type">int</span>));<span class="comment">//这样就开辟了一个三行四列的二维数组。</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="进程的地址空间"><a href="#进程的地址空间" class="headerlink" title="进程的地址空间"></a>进程的地址空间</h4><ol>
<li>栈：存放局部变量和用于函数的调用</li>
<li>堆：动态内存在堆上申请，注意堆需要人工管理</li>
<li>数据段：数据段分为data段和bss段。data段用来存放初始化的全局变量或者静态变量。bss段用来存放未初始化的全局或者静态变量</li>
<li>文本段：将可执行转换的机器语言存放到文本段</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/C%E8%AF%AD%E8%A8%80%E5%B0%8F%E7%BB%93/" data-id="cllwc4xgn0005jsmo8biqg5xy" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C++中的多线程的实现" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/29/C++%E4%B8%AD%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="article-date">
  <time class="dt-published" datetime="2023-08-29T13:11:36.345Z" itemprop="datePublished">2023-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>C++中的线程无法通过某一个接口来获取线程函数的返回值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thread <span class="title function_">tha</span><span class="params">(funa,x)</span>;</span><br><span class="line">tha.join();<span class="comment">//线程等待函数</span></span><br><span class="line">tha.detach();<span class="comment">//线程分离函数</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/29/C++%E4%B8%AD%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0/" data-id="cllwc4xg50001jsmo9wmf243w" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/29/%E9%87%8D%E8%BD%BD%E5%87%BD%E6%95%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/29/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/29/%E6%97%A9%E6%9C%9F%E7%B3%BB%E7%BB%9F%E9%87%87%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9D%A5%E7%AE%A1%E7%90%86%E5%92%8C%E5%AD%98%E6%94%BE%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%BD%86%E9%9A%8F%E7%9D%80%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E7%9A%84%E5%85%B4%E8%B5%B7%EF%BC%8C%E5%A4%A7%E5%AE%B6%E6%83%B3%E8%A6%81%E9%80%9A%E8%BF%87%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E6%9D%A5%E6%89%BE%E5%88%B0%E6%95%B0%E6%8D%AE%E4%B9%8B%E9%97%B4%E5%8F%AF%E8%83%BD%E5%AD%98%E5%9C%A8%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A4%A7%E5%AE%B6%E8%AE%BE%E8%AE%A1%E4%BA%86%E4%B8%80%E5%A5%97%E6%96%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%8C%E6%8A%8A%E6%89%80%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%A8%E9%83%A8%E5%AD%98%E5%82%A8%E5%88%B0%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%EF%BC%8C%E7%84%B6%E5%90%8E%E7%BB%9F%E4%B8%80%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%B3%BB%E7%BB%9F%E5%8F%AB%E5%81%9A%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E3%80%82/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/29/%E5%BC%95%E7%94%A8%E3%80%81%E6%8C%87%E9%92%88%E5%92%8Cconst%E7%9A%84%E5%85%B3%E7%B3%BB/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/29/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E7%AE%97%E6%B3%95%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>